import{g as $,b as q,h as H}from"./entry.8c805425.js";import{b as L,w as R,c as A,o as T,a6 as p,a8 as t,a0 as _,$ as h,af as N,v as n,H as P,D as V,ae as r,F as j,V as F,A as l,a9 as M,f as O,Z as f}from"./swiper-vue.08c57f7b.js";import{u as U}from"./authStore.65c45ba4.js";import{u as z}from"./cartStore.6784a142.js";const G={class:"full_height mt-30 mt185ptb30"},S={class:"cart_container mb-50"},Z={class:"list-inline dashboard-menu text-center"},J={class:"text-center",style:{margin:"72px 0"}},K=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),Q=t("h2",{class:"text-center"}," \u8CFC\u7269\u8ECA\u6C92\u6709\u6771\u897F ",-1),W={key:0,method:"post",action:"javascript:;"},X={class:"cart_list"},Y={class:"cart_img"},tt={href:"/product",target:"new"},st=["src"],et={class:"cart_tl"},at={href:"/product",target:"new"},nt=t("span",null,"\u6EFF\u984D\u514D\u904B",-1),ot={class:"cart_price text-right"},ct=t("td",{class:"cart_price text-right"},[t("button",{type:"button",class:"del_btn"},[t("i",{class:"fa-solid fa-trash-can"})])],-1),rt={class:"cart_check"},lt={class:"text-right mb-20 mt-20"},ut={class:"alert alert-warning alert-common",role:"alert"},ft={__name:"cart",setup(_t){const b=$(),D=q(),d=U(),a=z(),u=L("normal");R(b,s=>{m(),console.log(a==null?void 0:a.merch.filter(o=>o.attribute==="CODE_CHAIN"))});const i=A(()=>u.value==="cold-chain"?a==null?void 0:a.merch.filter(s=>s.attribute==="CODE_CHAIN"):a==null?void 0:a.merch.filter(s=>s.attribute==="GENERAL")),g=A({get:()=>i.value.reduce((s,o)=>s+v(o)*o.amount,0),set:s=>{g.value=s}});T(()=>{console.log(d.user),m()});const v=s=>{var o,c;return(o=d.user)!=null&&o.SVIPActivated?s==null?void 0:s.svipPrice:(c=d.user)!=null&&c.VIPActivated?s==null?void 0:s.vipPrice:d.status.loggedIn?s==null?void 0:s.memberPrice:s==null?void 0:s.price};function m(){switch(b.query.type){case"cold-chain":u.value="cold-chain";break;default:u.value="normal";break}}function E(){D.push({path:"/checkout",query:{...b.query}})}return(s,o)=>{var y,x,k;const c=H,I=O("n-input-number");return f(),p("div",G,[t("div",S,[t("ul",Z,[t("li",null,[_(c,{to:"/cart",class:N({active:n(u)==="normal"})},{default:h(()=>[l(" \u4E00\u822C\u5546\u54C1 ")]),_:1},8,["class"])]),t("li",null,[_(c,{to:"/cart?type=cold-chain",class:N({active:n(u)==="cold-chain"})},{default:h(()=>[l(" \u51B7\u934A\u5546\u54C1 ")]),_:1},8,["class"])])]),P(t("div",J,[K,Q,_(c,{to:"/shop"},{default:h(()=>[l(" \u8D95\u7DCA\u53BB\u6DFB\u52A0 ")]),_:1})],512),[[V,!((y=n(a))!=null&&y.merch.length)]]),(x=n(a))!=null&&x.merch.length?(f(),p("form",W,[t("div",null,"\u5171"+r(n(i).length)+"\u9805\u5546\u54C1",1),t("table",X,[t("tbody",null,[(f(!0),p(j,null,F(n(i),e=>{var C,w;return f(),p("tr",{key:e.id},[t("td",Y,[t("a",tt,[t("img",{src:((C=e==null?void 0:e.thumbnail)==null?void 0:C.url)||"/products/p"+(e.id-10)+".jpg"},null,8,st)])]),t("td",et,[t("a",at,[t("h5",null,r(e==null?void 0:e.name),1)]),_(I,{value:e.amount,"onUpdate:value":B=>e.amount=B,min:1,style:{width:"150px"}},{default:h(()=>[nt]),_:2},1032,["value","onUpdate:value"])]),t("td",ot,[t("span",null,"\u5E02\u50F9 $"+r((w=e==null?void 0:e.price)==null?void 0:w.market),1),l(" \u50F9\u9322 $"+r(v(e)),1)]),ct])}),128))])]),t("ul",rt,[t("li",null,[l(" \u5546\u54C1\u91D1\u984D\u5C0F\u8A08 (\u5171"+r(n(i).length)+"\u9805\u5546\u54C1)\uFF1A",1),t("span",null,"$"+r(n(g)),1)])]),t("div",lt,[_(c,{type:"button",class:"btn btn-main btn-bag",to:"/shop"},{default:h(()=>[l(" \u7E7C\u7E8C\u8CFC\u7269 ")]),_:1}),t("button",{type:"submit",class:"btn btn-main btn-check",onClick:E}," \u4E0B\u4E00\u6B65 ")])])):M("",!0),P(t("div",ut," \u904B\u9001\u63D0\u9192\uFF0Cex\uFF1A\u5B85\u914D\u586B\u5BEB\u5230\u8CA8\u6642\u9593 ",512),[[V,(k=n(a))==null?void 0:k.merch.length]])])])}}};export{ft as default};

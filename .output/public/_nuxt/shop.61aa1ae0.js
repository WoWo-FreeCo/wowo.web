import{a as M,u as Y,j as Z,k as K}from"./entry.96dc2463.js";import{b as i,o as Q,q as W,_ as u,aa as a,y as o,ad as S,F as B,V,ae as r,J as L,G as N,Z as _,$ as C,a0 as k,C as p,a8 as X,a9 as ss}from"./swiper-vue.d582d122.js";import{u as as}from"./cartStore.391fa2af.js";import{a as os,c as D}from"./requestURL.6ae00f75.js";const h=$=>(X("data-v-4dda3dfb"),$=$(),ss(),$),ts={class:"full_height mt-120"},es={class:"row"},ns={class:"col-sm-3 p-0 bg_left2"},cs={id:"accordion",class:"panel-group commonAccordion",role:"tablist","aria-multiselectable":"true"},ls={class:"panel panel-default"},rs={id:"headingOne",class:"panel-heading",role:"tab"},ds={class:"panel-title"},is={class:"col-sm-9 pl20pr30"},us={class:"breadcrumb"},_s=h(()=>a("li",null,[a("a",{href:"/"},"Home")],-1)),ps=h(()=>a("li",null,"\u7522\u54C1\u4ECB\u7D39",-1)),hs={class:"active"},fs={class:"row"},vs={class:"flex-row col-lg-4 col-md-6 col-sm-12"},gs={class:"hot_sale2"},$s={class:"product_img"},ys=["src"],bs=h(()=>a("span",null,"\u5E02\u5834\u50F9",-1)),Cs=h(()=>a("span",null,"\u6703\u54E1\u50F9",-1)),ks=h(()=>a("span",null,"VIP\u50F9",-1)),Ps=h(()=>a("span",null,"SVIP\u50F9",-1)),xs=["onClick"],ws=h(()=>a("i",{class:"fa-solid fa-cart-shopping"},null,-1)),Is=[ws],qs={class:"not-found"},Ts={class:"text-center"},ms={class:"pagination post-pagination"},Ss={__name:"shop",setup($){const y=Y(),c=Z(),O={id:-1,name:"\u6240\u6709\u7522\u54C1"},v=i(O.id),R=i(1),b=i([]),P=i(1),x=i([]),j=i([]),w=as(),I=i(!1),q=i([]);Q(async()=>{await W(),F()});function F(){U(),T()}async function U(){var l,n,t;try{const d=(l=c.query)==null?void 0:l.category,s=await $fetch(`${y.public.apiBase}/${os}`),{data:e}=s;let f=`categoryId=${d}`;(((n=c.query)==null?void 0:n.category)==="-1"||!((t=c.query)!=null&&t.category))&&(f="");const g=await $fetch(`${y.public.apiBase}/${D}?take=200&${f}`);b.value=g.data,P.value=parseInt(b.value.length/6)+1,x.value=[O,...e]}catch{}}async function T(l,n){var t,d,s,e,f;try{const g=l||((t=c.query)==null?void 0:t.category),A=n||((d=c.query)==null?void 0:d.page)||1,E=6;v.value=g||-1,R.value=A;let m=`categoryId=${g}`;(l===-1||((s=c.query)==null?void 0:s.category)==="-1"||!((e=c.query)!=null&&e.category))&&(m=""),console.log((f=c.query)==null?void 0:f.category);const H=await $fetch(`${y.public.apiBase}/${D}?take=${E}&${m}&skip=${(A-1)*E}`),{data:G}=H;j.value=G,q.value=G;const J=await $fetch(`${y.public.apiBase}/${D}?take=200&${m}`);b.value=J.data,P.value=parseInt(b.value.length/6)+1}catch{}}function z(l){const n=w.merch.find(t=>t.id===l.id);n?n.amount++:w.merch.push({...l,amount:1}),console.log(w.merch)}return(l,n)=>{var d;const t=K;return _(),u("div",ts,[a("div",es,[a("div",ns,[a("div",cs,[a("div",ls,[a("div",rs,[a("h4",ds,[a("a",{role:"button",href:"javascript:;",onClick:n[0]||(n[0]=s=>I.value=!o(I))}," \u7522\u54C1\u985E\u5225 ")])]),a("div",{id:"tab-collapse-area",class:S([{inactive:o(I)},"panel-collapse collapse in"]),role:"tabpanel","aria-labelledby":"headingOne"},[a("ul",null,[(_(!0),u(B,null,V(o(x),s=>{var e;return _(),u("li",{key:s.id,class:S({active:((e=o(c).query)==null?void 0:e.category)==s.id||o(v)===s.id})},[C(t,{to:`/shop?category=${s.id}`,onClick:f=>T(s.id,1)},{default:k(()=>[p(r(s.name),1)]),_:2},1032,["to","onClick"])],2)}),128))])],2)])])]),a("div",is,[a("ol",us,[_s,ps,a("li",hs,r((d=o(x).find(s=>s.id===o(v)))==null?void 0:d.name),1)]),a("div",fs,[a("div",vs,[(_(!0),u(B,null,V(o(q),s=>(_(),u("div",{key:s.id,class:"product_frame"},[L(a("div",gs,[a("span",null,r(s.brief),1)],512),[[N,s.brief]]),a("div",$s,[C(t,{to:`/product?id=${s.id}`},{default:k(()=>{var e;return[a("img",{src:((e=s==null?void 0:s.thumbnail)==null?void 0:e.url)||`https://picsum.photos/500/500?${s.id}`,alt:""},null,8,ys)]}),_:2},1032,["to"])]),a("h3",null,[C(t,{to:`/product?id=${s.id}`},{default:k(()=>[p(r(s.name),1)]),_:2},1032,["to"])]),a("ul",null,[a("li",null,[p(" $"+r(s==null?void 0:s.price)+" ",1),bs]),a("li",null,[p(" $"+r(s==null?void 0:s.memberPrice)+" ",1),Cs]),a("li",null,[p(" $"+r(s==null?void 0:s.vipPrice)+" ",1),ks]),a("li",null,[p(" $"+r(s==null?void 0:s.svipPrice)+" ",1),Ps]),a("li",null,[a("button",{onClick:e=>z(s)},Is,8,xs)])])]))),128))])]),L(a("span",qs,"\u76EE\u524D\u6C92\u6709\u8A72\u985E\u5225\u7684\u7522\u54C1",512),[[N,!o(q).length]]),a("div",Ts,[a("ul",ms,[(_(!0),u(B,null,V(o(P),s=>(_(),u("li",{key:s,class:S({active:o(R)==s})},[C(t,{to:`/shop?category=${o(v)}&page=${s}`,onClick:e=>T(o(v),s)},{default:k(()=>[p(r(s),1)]),_:2},1032,["to","onClick"])],2))),128))])])])])])}}},Rs=M(Ss,[["__scopeId","data-v-4dda3dfb"]]);export{Rs as default};

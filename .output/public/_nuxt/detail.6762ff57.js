import{a as ot,q as it,H as ut,r as rt,u as dt,b as _t,R as ht,S as mt,C as gt}from"./entry.809284d4.js";import{b as pt,c as r,o as ft,_ as h,aa as t,C as o,ae as n,y as a,F as bt,V as vt,$ as m,a0 as g,J as X,G as Z,Z as p,a8 as yt,a9 as Et}from"./swiper-vue.6d0a2b42.js";import{d as It}from"./dayjs.min.5c5420ad.js";import{P as St}from"./common.2876555a.js";const _=d=>(yt("data-v-601e7b53"),d=d(),Et(),d),Ct={class:"full_height mt185ptb30"},Dt={class:"container"},kt={class:"order_div"},Rt={class:"order_tl"},Tt=_(()=>t("a",{href:"#","data-toggle":"modal","data-target":"#back",class:"back_span"},"\u7533\u8ACB\u53D6\u6D88\u8A02\u55AE",-1)),wt={class:"order_div"},$t=_(()=>t("div",{class:"order_tl"}," \u4ED8\u6B3E\u4EBA\u8CC7\u8A0A ",-1)),At={class:"cart_list"},xt={class:"cart_img"},Pt=["src"],qt={class:"cart_tl"},Ot={class:"product-quantity"},Lt={class:"cart-price text-right"},Nt={class:"cart_check"},Bt=_(()=>t("li",null," \u7D05\u5229\u6263\u9EDE\uFF1A"+n(0),-1)),Vt={class:"border_top"},Mt={class:"text-center mb-20 mt-20"},Yt=_(()=>t("button",{type:"button",class:"btn btn-main btn-check"}," \u7ACB\u5373\u4ED8\u6B3E ",-1)),Ft={__name:"detail",setup(d){const Q=it(),f=ut(),tt=rt(),b=dt(),v=_t(),s=pt({}),et=r(()=>{var e;switch((e=s.value)==null?void 0:e.attribute){case St.ColdChain:return"\u4E00\u822C";default:return"\u51B7\u93C8"}}),y=r(()=>{var e;switch((e=s.value)==null?void 0:e.orderStatus){case"WAIT_PAYMENT":return"\u5F85\u4ED8\u6B3E";case"WAIT_DELIVER":return"\u5F85\u51FA\u8CA8";case"WAIT_RECEIVE":return"\u5DF2\u51FA\u8CA8";case"COMPLETED":return"\u5DF2\u5B8C\u6210";case"CANCELLED":return"\u5DF2\u53D6\u6D88";case"REVOKED":return"\u5DF2\u9000\u8CA8";default:return s.value.orderStatus}}),nt=r(()=>{var l,i;const e=(i=(l=s.value)==null?void 0:l.items)==null?void 0:i.find(u=>u.productId===null&&(u==null?void 0:u.name)!=="\u7D05\u5229\u6298\u62B5");return(e==null?void 0:e.price)===0?"\u514D\u904B":e?e.price:"\u514D\u904B"}),st=r(()=>{var e,l;return(l=(e=s.value)==null?void 0:e.items)==null?void 0:l.reduce((i,u)=>i+u.price*u.quantity,0)}),E=r(()=>{var e,l;return(l=(e=s.value)==null?void 0:e.items)==null?void 0:l.filter(i=>i.productId!==null)}),at=r(()=>{var e;return(e=E.value)==null?void 0:e.reduce((l,i)=>l+i.price*i.quantity,0)});ft(async()=>{if(!Q.status.loggedIn)return tt.push({path:"/login",query:{redirect:"/order"}});await I()});async function I(){var e;try{const l=(e=f.query)==null?void 0:e.id,i=await $fetch(`${b.public.apiBase}/${ht(l)}`,{headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}});s.value=i.data,console.log(i)}catch(l){console.log(l)}}async function lt(){var e;try{const l=(e=f.query)==null?void 0:e.id,i=await $fetch(`${b.public.apiBase}/${mt(l)}`,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}});console.log(i),v.success("\u5DF2\u53D6\u6D88\u8A02\u55AE")}catch(l){v.error(l.data)}I()}function ct(e){return It(e).format("YYYY/MM/DD A hh:mm")}return(e,l)=>{var u,S,C,D,k,R,T,w,$,A,x,P,q,O,L,N,B,V,M,Y,F,z,W,G,j,H,J,K,U;const i=gt;return p(),h("div",null,[t("section",Ct,[t("div",Dt,[t("div",kt,[t("div",Rt,[o(" \u8A02\u55AE\u7DE8\u865F\uFF1A"),t("span",null,n((u=a(s))==null?void 0:u.id),1),Tt]),t("ul",null,[t("li",null,[o("\u5546\u54C1\u904B\u9001\u985E\u578B\uFF1A"),t("span",null,n(a(et)),1)]),t("li",null,[o("\u6210\u7ACB\u65E5\u671F\uFF1A"),t("span",null,n(ct((S=a(s))==null?void 0:S.createdAt)),1)]),t("li",null,[o("\u8A02\u55AE\u72C0\u614B\uFF1A"),t("span",null,n(a(y)),1)])])]),t("div",wt,[$t,t("ul",null,[t("li",null,[o("\u59D3\u540D\uFF1A"),t("span",null,n((D=(C=a(s))==null?void 0:C.consignee)==null?void 0:D.name),1)]),t("li",null,[o("Email\uFF1A"),t("span",null,n((R=(k=a(s))==null?void 0:k.consignee)==null?void 0:R.email),1)]),t("li",null,[o("\u7701\u4EFD\uFF1A"),t("span",null,n((w=(T=a(s))==null?void 0:T.consignee)==null?void 0:w.province),1)]),t("li",null,[o("\u7E23\u5E02\uFF1A"),t("span",null,n((A=($=a(s))==null?void 0:$.consignee)==null?void 0:A.district),1)]),t("li",null,[o("\u57CE\u5E02\uFF1A"),t("span",null,n((P=(x=a(s))==null?void 0:x.consignee)==null?void 0:P.city),1)]),t("li",null,[o("\u57CE\u93AE\uFF1A"),t("span",null,n((O=(q=a(s))==null?void 0:q.consignee)==null?void 0:O.town),1)]),t("li",null,[o("\u90F5\u905E\u5340\u865F\uFF1A"),t("span",null,n((N=(L=a(s))==null?void 0:L.consignee)==null?void 0:N.zipCode),1)]),t("li",null,[o("\u884C\u52D5\u96FB\u8A71\uFF1A"),t("span",null,n((V=(B=a(s))==null?void 0:B.consignee)==null?void 0:V.cellphone),1)]),t("li",null,[o("\u5730\u5740\uFF1A"),t("span",null,n((Y=(M=a(s))==null?void 0:M.consignee)==null?void 0:Y.addressDetailOne),1)]),t("li",null,[o("\u53D6\u8CA8\u5E97\u5BB6\u540D\u7A31\uFF1A"),t("span",null,n((z=(F=a(s))==null?void 0:F.consignee)==null?void 0:z.stationName),1)]),t("li",null,[o("\u53D6\u8CA8\u5E97\u5BB6\u7DE8\u865F\uFF1A"),t("span",null,n((G=(W=a(s))==null?void 0:W.consignee)==null?void 0:G.stationCode),1)]),t("li",null,[o("\u6536\u4EF6\u5099\u8A3B\uFF1A"),t("span",null,n((H=(j=a(s))==null?void 0:j.consignee)==null?void 0:H.remark),1)]),t("li",null,[o("\u5BC4\u4EF6\u5099\u8A3B\uFF1A"),t("span",null,n((K=(J=a(s))==null?void 0:J.consignee)==null?void 0:K.senderRemark),1)])])]),t("table",At,[t("tbody",null,[(p(!0),h(bt,null,vt(a(s).items,c=>X((p(),h("tr",{key:c.name},[t("td",xt,[m(i,{to:`/product?id=${c==null?void 0:c.productId}`,target:"new"},{default:g(()=>[t("img",{src:c==null?void 0:c.coverImg},null,8,Pt)]),_:2},1032,["to"])]),t("td",qt,[m(i,{to:`/product?id=${c==null?void 0:c.productId}`,target:"new"},{default:g(()=>[t("h5",null,n(c.name),1)]),_:2},1032,["to"]),t("div",Ot," X "+n(c.quantity),1)]),t("td",Lt,[t("span",null,"$"+n((c==null?void 0:c.price)*(c==null?void 0:c.quantity)),1)])])),[[Z,c.productId!==null]])),128))])]),t("ul",Nt,[t("li",null," \u5546\u54C1\u91D1\u984D\u5C0F\u8A08 (\u5171"+n((U=a(E))==null?void 0:U.length)+"\u9805\u5546\u54C1)\uFF1A$"+n(a(at)),1),t("li",null," \u904B\u8CBB\uFF1A"+n(a(nt)),1),Bt,t("li",Vt,[o(" \u8A02\u55AE\u7E3D\u91D1\u984D\uFF1A"),t("span",null,"$"+n(a(st)),1)])]),t("div",Mt,[m(i,{to:"/order",type:"button",class:"btn btn-main btn-default"},{default:g(()=>[o(" \u56DE\u4E0A\u4E00\u9801 ")]),_:1}),X(t("button",{type:"button",class:"btn btn-main btn-default","data-toggle":"modal",onClick:lt}," \u53D6\u6D88\u8A02\u55AE ",512),[[Z,a(y)!=="\u5DF2\u53D6\u6D88"]]),Yt])])])])}}},Ht=ot(Ft,[["__scopeId","data-v-601e7b53"]]);export{Ht as default};

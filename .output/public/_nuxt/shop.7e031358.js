import{a as Y,u as Z,F as K,H as Q,c as W,f as V,C as X}from"./entry.c4b0373b.js";import{b as i,o as aa,q as oa,_,aa as o,y as e,ad as D,F as O,V as R,ae as d,J as A,G as E,Z as p,$ as k,a0 as I,C as h,a8 as ea,a9 as sa}from"./swiper-vue.6d0a2b42.js";const g=v=>(ea("data-v-cc5122e9"),v=v(),sa(),v),ta={class:"full_height mt-120"},ca={class:"row"},na={class:"col-sm-3 p-0 bg_left2"},la={id:"accordion",class:"panel-group commonAccordion",role:"tablist","aria-multiselectable":"true"},ra={class:"panel panel-default"},da={id:"headingOne",class:"panel-heading",role:"tab"},ia={class:"panel-title"},ua={class:"col-sm-9 pl20pr30"},_a={class:"breadcrumb"},pa=g(()=>o("li",null,[o("a",{href:"/"},"Home")],-1)),ha=g(()=>o("li",null,"\u7522\u54C1\u4ECB\u7D39",-1)),ga={class:"active"},fa={class:"row"},va={class:"flex-row col-lg-4 col-md-6 col-sm-12"},ya={class:"hot_sale2"},$a={class:"product_img"},Ca=["src"],ba=g(()=>o("span",null,"\u5E02\u50F9",-1)),ka=g(()=>o("span",null,"\u6703\u54E1",-1)),Ia=g(()=>o("span",null,"VIP",-1)),Pa=g(()=>o("span",null,"SVIP",-1)),xa=["onClick"],wa=g(()=>o("i",{class:"fa-solid fa-cart-shopping"},null,-1)),qa=[wa],Ta={class:"not-found"},Sa={class:"text-center"},Ba={class:"pagination post-pagination"},Va={__name:"shop",setup(v){const y=Z(),l=K(),G={id:-1,name:"\u6240\u6709\u7522\u54C1"},f=i(G.id),L=i(1),$=i([]),P=i(1),x=i([]),H=i([]),C=Q(),w=i(!1),q=i([]);aa(async()=>{await oa(),M()});function M(){var s;U(),T({_categoryId:((s=l.query)==null?void 0:s.category)||-1})}async function U(){var s,t,c;try{const r=(s=l.query)==null?void 0:s.category,a=await $fetch(`${y.public.apiBase}/${W}`),{data:n}=a;let u=`categoryId=${r}`;(((t=l.query)==null?void 0:t.category)==="-1"||!((c=l.query)!=null&&c.category))&&(u="");const b=await $fetch(`${y.public.apiBase}/${V}?take=200&${u}`);$.value=b.data,P.value=parseInt($.value.length/6)+1,x.value=[G,...n]}catch{}}async function T(s={_categoryId:-1,_page:1,mount:!1}){var a,n,u,b;const{_categoryId:t,_page:c,mount:r}=s;console.log(s);try{const S=t||((a=l.query)==null?void 0:a.category),N=c||((n=l.query)==null?void 0:n.page)||1,F=6;f.value=S||-1,L.value=N;let B=`categoryId=${S}`;(t==-1||!((u=l.query)!=null&&u.category)||r)&&(B=""),console.log((b=l.query)==null?void 0:b.category),console.log("b",t);const z=await $fetch(`${y.public.apiBase}/${V}?take=${F}&${B}&skip=${(N-1)*F}`),{data:m}=z;H.value=m,q.value=m;const J=await $fetch(`${y.public.apiBase}/${V}?take=200&${B}`);$.value=J.data,P.value=parseInt($.value.length/6)+1}catch{}}function j(s){const t=C.merch.find(r=>r.id===s.id);t?t.amount++:C.merch.push({...s,amount:1});const c=C.merch;C.updateMerch(c)}return(s,t)=>{var r;const c=X;return p(),_("div",ta,[o("div",ca,[o("div",na,[o("div",la,[o("div",ra,[o("div",da,[o("h4",ia,[o("a",{role:"button",href:"javascript:;",onClick:t[0]||(t[0]=a=>w.value=!e(w))}," \u7522\u54C1\u985E\u5225 ")])]),o("div",{id:"tab-collapse-area",class:D([{inactive:e(w)},"panel-collapse collapse in"]),role:"tabpanel","aria-labelledby":"headingOne"},[o("ul",null,[(p(!0),_(O,null,R(e(x),a=>{var n;return p(),_("li",{key:a.id,class:D({active:((n=e(l).query)==null?void 0:n.category)==a.id||e(f)===a.id})},[k(c,{to:`/shop?category=${a.id}`,onClick:u=>T({_categoryId:a.id,_page:1})},{default:I(()=>[h(d(a.name),1)]),_:2},1032,["to","onClick"])],2)}),128))])],2)])])]),o("div",ua,[o("ol",_a,[pa,ha,o("li",ga,d((r=e(x).find(a=>a.id===e(f)))==null?void 0:r.name),1)]),o("div",fa,[o("div",va,[(p(!0),_(O,null,R(e(q),a=>{var n;return A((p(),_("div",{key:a.id,class:"product_frame"},[A(o("div",ya,[o("span",null,d(a.brief),1)],512),[[E,a.brief]]),o("div",$a,[k(c,{to:`/product?id=${a.id}`},{default:I(()=>[o("img",{src:a==null?void 0:a.coverImg,alt:""},null,8,Ca)]),_:2},1032,["to"])]),o("h3",null,[k(c,{to:`/product?id=${a.id}`},{default:I(()=>[h(d(a.name),1)]),_:2},1032,["to"])]),o("ul",null,[o("li",null,[h(" $"+d(a==null?void 0:a.price)+" ",1),ba]),o("li",null,[h(" $"+d(a==null?void 0:a.memberPrice)+" ",1),ka]),o("li",null,[h(" $"+d(a==null?void 0:a.vipPrice)+" ",1),Ia]),o("li",null,[h(" $"+d(a==null?void 0:a.svipPrice)+" ",1),Pa]),o("li",null,[o("button",{onClick:u=>j(a)},qa,8,xa)])])])),[[E,((n=a==null?void 0:a.inventory)==null?void 0:n.quantity)>=1]])}),128))])]),A(o("span",Ta,"\u76EE\u524D\u6C92\u6709\u8A72\u985E\u5225\u7684\u7522\u54C1",512),[[E,!e(q).length]]),o("div",Sa,[o("ul",Ba,[(p(!0),_(O,null,R(e(P),a=>(p(),_("li",{key:a,class:D({active:e(L)==a})},[k(c,{to:`/shop?category=${e(f)}&page=${a}`,onClick:n=>T({_categoryId:e(f),_page:a})},{default:I(()=>[h(d(a),1)]),_:2},1032,["to","onClick"])],2))),128))])])])])])}}},Ra=Y(Va,[["__scopeId","data-v-cc5122e9"]]);export{Ra as default};

import{a as Y,u as Z,E as K,F as Q,c as W,f as V,B as X}from"./entry.b2c13a7d.js";import{b as i,o as aa,q as oa,_,aa as o,y as s,ad as D,F as E,V as O,ae as d,J as R,G as A,Z as p,$ as k,a0 as I,C as h,a8 as sa,a9 as ea}from"./swiper-vue.6d0a2b42.js";const g=v=>(sa("data-v-51320b38"),v=v(),ea(),v),ta={class:"full_height mt-120"},ca={class:"row"},na={class:"col-sm-3 p-0 bg_left2"},la={id:"accordion",class:"panel-group commonAccordion",role:"tablist","aria-multiselectable":"true"},ra={class:"panel panel-default"},da={id:"headingOne",class:"panel-heading",role:"tab"},ia={class:"panel-title"},ua={class:"col-sm-9 pl20pr30"},_a={class:"breadcrumb"},pa=g(()=>o("li",null,[o("a",{href:"/"},"Home")],-1)),ha=g(()=>o("li",null,"\u7522\u54C1\u4ECB\u7D39",-1)),ga={class:"active"},fa={class:"row"},va={class:"flex-row col-lg-4 col-md-6 col-sm-12"},ya={class:"hot_sale2"},$a={class:"product_img"},ba=["src"],Ca=g(()=>o("span",null,"\u5E02\u5834\u50F9",-1)),ka=g(()=>o("span",null,"\u6703\u54E1\u50F9",-1)),Ia=g(()=>o("span",null,"VIP\u50F9",-1)),Pa=g(()=>o("span",null,"SVIP\u50F9",-1)),xa=["onClick"],wa=g(()=>o("i",{class:"fa-solid fa-cart-shopping"},null,-1)),qa=[wa],Ta={class:"not-found"},Ba={class:"text-center"},Sa={class:"pagination post-pagination"},Va={__name:"shop",setup(v){const y=Z(),l=K(),G={id:-1,name:"\u6240\u6709\u7522\u54C1"},f=i(G.id),L=i(1),$=i([]),P=i(1),x=i([]),M=i([]),b=Q(),w=i(!1),q=i([]);aa(async()=>{await oa(),U()});function U(){var e;j(),T({_categoryId:((e=l.query)==null?void 0:e.category)||-1})}async function j(){var e,t,c;try{const r=(e=l.query)==null?void 0:e.category,a=await $fetch(`${y.public.apiBase}/${W}`),{data:n}=a;let u=`categoryId=${r}`;(((t=l.query)==null?void 0:t.category)==="-1"||!((c=l.query)!=null&&c.category))&&(u="");const C=await $fetch(`${y.public.apiBase}/${V}?take=200&${u}`);$.value=C.data,P.value=parseInt($.value.length/6)+1,x.value=[G,...n]}catch{}}async function T(e={_categoryId:-1,_page:1,mount:!1}){var a,n,u,C;const{_categoryId:t,_page:c,mount:r}=e;console.log(e);try{const B=t||((a=l.query)==null?void 0:a.category),N=c||((n=l.query)==null?void 0:n.page)||1,F=6;f.value=B||-1,L.value=N;let S=`categoryId=${B}`;(t==-1||!((u=l.query)!=null&&u.category)||r)&&(S=""),console.log((C=l.query)==null?void 0:C.category),console.log("b",t);const H=await $fetch(`${y.public.apiBase}/${V}?take=${F}&${S}&skip=${(N-1)*F}`),{data:m}=H;M.value=m,q.value=m;const J=await $fetch(`${y.public.apiBase}/${V}?take=200&${S}`);$.value=J.data,P.value=parseInt($.value.length/6)+1}catch{}}function z(e){const t=b.merch.find(r=>r.id===e.id);t?t.amount++:b.merch.push({...e,amount:1});const c=b.merch;b.updateMerch(c)}return(e,t)=>{var r;const c=X;return p(),_("div",ta,[o("div",ca,[o("div",na,[o("div",la,[o("div",ra,[o("div",da,[o("h4",ia,[o("a",{role:"button",href:"javascript:;",onClick:t[0]||(t[0]=a=>w.value=!s(w))}," \u7522\u54C1\u985E\u5225 ")])]),o("div",{id:"tab-collapse-area",class:D([{inactive:s(w)},"panel-collapse collapse in"]),role:"tabpanel","aria-labelledby":"headingOne"},[o("ul",null,[(p(!0),_(E,null,O(s(x),a=>{var n;return p(),_("li",{key:a.id,class:D({active:((n=s(l).query)==null?void 0:n.category)==a.id||s(f)===a.id})},[k(c,{to:`/shop?category=${a.id}`,onClick:u=>T({_categoryId:a.id,_page:1})},{default:I(()=>[h(d(a.name),1)]),_:2},1032,["to","onClick"])],2)}),128))])],2)])])]),o("div",ua,[o("ol",_a,[pa,ha,o("li",ga,d((r=s(x).find(a=>a.id===s(f)))==null?void 0:r.name),1)]),o("div",fa,[o("div",va,[(p(!0),_(E,null,O(s(q),a=>{var n;return R((p(),_("div",{key:a.id,class:"product_frame"},[R(o("div",ya,[o("span",null,d(a.brief),1)],512),[[A,a.brief]]),o("div",$a,[k(c,{to:`/product?id=${a.id}`},{default:I(()=>[o("img",{src:a==null?void 0:a.coverImg,alt:""},null,8,ba)]),_:2},1032,["to"])]),o("h3",null,[k(c,{to:`/product?id=${a.id}`},{default:I(()=>[h(d(a.name),1)]),_:2},1032,["to"])]),o("ul",null,[o("li",null,[h(" $"+d(a==null?void 0:a.price)+" ",1),Ca]),o("li",null,[h(" $"+d(a==null?void 0:a.memberPrice)+" ",1),ka]),o("li",null,[h(" $"+d(a==null?void 0:a.vipPrice)+" ",1),Ia]),o("li",null,[h(" $"+d(a==null?void 0:a.svipPrice)+" ",1),Pa]),o("li",null,[o("button",{onClick:u=>z(a)},qa,8,xa)])])])),[[A,((n=a==null?void 0:a.inventory)==null?void 0:n.quantity)>=1]])}),128))])]),R(o("span",Ta,"\u76EE\u524D\u6C92\u6709\u8A72\u985E\u5225\u7684\u7522\u54C1",512),[[A,!s(q).length]]),o("div",Ba,[o("ul",Sa,[(p(!0),_(E,null,O(s(P),a=>(p(),_("li",{key:a,class:D({active:s(L)==a})},[k(c,{to:`/shop?category=${s(f)}&page=${a}`,onClick:n=>T({_categoryId:s(f),_page:a})},{default:I(()=>[h(d(a),1)]),_:2},1032,["to","onClick"])],2))),128))])])])])])}}},Oa=Y(Va,[["__scopeId","data-v-51320b38"]]);export{Oa as default};

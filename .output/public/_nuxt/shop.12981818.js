import{a as Q,u as W,F as X,H as m,c as aa,f as F,C as oa}from"./entry.981b651e.js";import{b as _,o as sa,q as ea,_ as p,aa as o,y as n,ad as k,F as V,V as D,ae as i,J as O,G as R,Z as h,$ as P,a0 as I,C as f,a8 as ta,a9 as ca}from"./swiper-vue.6d0a2b42.js";const v=y=>(ta("data-v-7eb09654"),y=y(),ca(),y),na={class:"full_height mt-120"},la={class:"row"},ra={class:"col-sm-3 p-0 bg_left2"},da={id:"accordion",class:"panel-group commonAccordion",role:"tablist","aria-multiselectable":"true"},ia={class:"panel panel-default"},ua={id:"headingOne",class:"panel-heading",role:"tab"},_a={class:"panel-title"},pa={class:"col-sm-9 pl20pr30"},ha={class:"breadcrumb"},fa=v(()=>o("li",null,[o("a",{href:"/"},"Home")],-1)),va=v(()=>o("li",null,"\u7522\u54C1\u4ECB\u7D39",-1)),ga={class:"active"},ya={class:"row"},$a={class:"flex-row col-lg-4 col-md-6 col-sm-12"},ba=["onClick"],Ca={class:"hot_sale2"},ka={class:"product_img"},Pa=["src"],Ia=v(()=>o("span",null,"\u5E02\u50F9",-1)),xa=v(()=>o("span",null,"\u6703\u54E1",-1)),wa=v(()=>o("span",null,"VIP",-1)),qa=v(()=>o("span",null,"SVIP",-1)),Ta=["onClick"],Ma=v(()=>o("i",{class:"fa-solid fa-cart-shopping"},null,-1)),Sa=[Ma],Ba={class:"not-found"},Fa={class:"text-center"},Va={class:"pagination post-pagination"},Da={__name:"shop",setup(y){const $=W(),d=X(),A={id:-1,name:"\u6240\u6709\u7522\u54C1"},g=_(A.id),E=_(1),b=_([]),x=_(1),w=_([]),U=_([]),l=m(),q=_(!1),T=_([]);sa(async()=>{await ea(),j()});function j(){var s;z(),M({_categoryId:((s=d.query)==null?void 0:s.category)||-1})}async function z(){var s,e,t;try{const c=(s=d.query)==null?void 0:s.category,a=await $fetch(`${$.public.apiBase}/${aa}`),{data:r}=a;let u=`categoryId=${c}`;(((e=d.query)==null?void 0:e.category)==="-1"||!((t=d.query)!=null&&t.category))&&(u="");const C=await $fetch(`${$.public.apiBase}/${F}?take=200&${u}`);b.value=C.data,x.value=parseInt(b.value.length/6)+1,w.value=[A,...r]}catch{}}async function M(s={_categoryId:-1,_page:1,mount:!1}){var a,r,u,C;const{_categoryId:e,_page:t,mount:c}=s;console.log(s);try{const S=e||((a=d.query)==null?void 0:a.category),L=t||((r=d.query)==null?void 0:r.page)||1,N=6;g.value=S||-1,E.value=L;let B=`categoryId=${S}`;(e==-1||!((u=d.query)!=null&&u.category)||c)&&(B=""),console.log((C=d.query)==null?void 0:C.category),console.log("b",e);const Z=await $fetch(`${$.public.apiBase}/${F}?take=${N}&${B}&skip=${(L-1)*N}`),{data:H}=Z;U.value=H,T.value=H;const K=await $fetch(`${$.public.apiBase}/${F}?take=200&${B}`);b.value=K.data,x.value=parseInt(b.value.length/6)+1}catch{}}function G(s){var e;return(e=l.favMerch)==null?void 0:e.find(t=>t.id===(s==null?void 0:s.id))}function J(s){l.favMerch.find(c=>c.id===(s==null?void 0:s.id))?l.favMerch=l.favMerch.filter(c=>c.id!==(s==null?void 0:s.id)):l.favMerch.push(s);const t=l.favMerch;l.updateFavMerch(t)}function Y(s){const e=l.merch.find(c=>c.id===s.id);e?e.amount++:l.merch.push({...s,amount:1});const t=l.merch;l.updateMerch(t)}return(s,e)=>{var c;const t=oa;return h(),p("div",na,[o("div",la,[o("div",ra,[o("div",da,[o("div",ia,[o("div",ua,[o("h4",_a,[o("a",{role:"button",href:"javascript:;",onClick:e[0]||(e[0]=a=>q.value=!n(q))}," \u7522\u54C1\u985E\u5225 ")])]),o("div",{id:"tab-collapse-area",class:k([{inactive:n(q)},"panel-collapse collapse in"]),role:"tabpanel","aria-labelledby":"headingOne"},[o("ul",null,[(h(!0),p(V,null,D(n(w),a=>{var r;return h(),p("li",{key:a.id,class:k({active:((r=n(d).query)==null?void 0:r.category)==a.id||n(g)===a.id})},[P(t,{to:`/shop?category=${a.id}`,onClick:u=>M({_categoryId:a.id,_page:1})},{default:I(()=>[f(i(a.name),1)]),_:2},1032,["to","onClick"])],2)}),128))])],2)])])]),o("div",pa,[o("ol",ha,[fa,va,o("li",ga,i((c=n(w).find(a=>a.id===n(g)))==null?void 0:c.name),1)]),o("div",ya,[o("div",$a,[(h(!0),p(V,null,D(n(T),a=>{var r;return O((h(),p("div",{key:a.id,class:"product_frame"},[o("button",{class:"add_like",onClick:u=>J(a)},[o("i",{class:k(["far fa-heart",{"fa-solid":G(a),"fa-heart":G(a)}])},null,2)],8,ba),O(o("div",Ca,[o("span",null,i(a.brief),1)],512),[[R,a.brief]]),o("div",ka,[P(t,{to:`/product?id=${a.id}`},{default:I(()=>[o("img",{src:a==null?void 0:a.coverImg,alt:""},null,8,Pa)]),_:2},1032,["to"])]),o("h3",null,[P(t,{to:`/product?id=${a.id}`},{default:I(()=>[f(i(a.name),1)]),_:2},1032,["to"])]),o("ul",null,[o("li",null,[f(" $"+i(a==null?void 0:a.price)+" ",1),Ia]),o("li",null,[f(" $"+i(a==null?void 0:a.memberPrice)+" ",1),xa]),o("li",null,[f(" $"+i(a==null?void 0:a.vipPrice)+" ",1),wa]),o("li",null,[f(" $"+i(a==null?void 0:a.svipPrice)+" ",1),qa]),o("li",null,[o("button",{onClick:u=>Y(a)},Sa,8,Ta)])])])),[[R,((r=a==null?void 0:a.inventory)==null?void 0:r.quantity)>=1]])}),128))])]),O(o("span",Ba,"\u76EE\u524D\u6C92\u6709\u8A72\u985E\u5225\u7684\u7522\u54C1",512),[[R,!n(T).length]]),o("div",Fa,[o("ul",Va,[(h(!0),p(V,null,D(n(x),a=>(h(),p("li",{key:a,class:k({active:n(E)==a})},[P(t,{to:`/shop?category=${n(g)}&page=${a}`,onClick:r=>M({_categoryId:n(g),_page:a})},{default:I(()=>[f(i(a),1)]),_:2},1032,["to","onClick"])],2))),128))])])])])])}}},Aa=Q(Da,[["__scopeId","data-v-7eb09654"]]);export{Aa as default};

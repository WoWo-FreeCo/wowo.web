import{u as V}from"./pageStatusStore.4e239b7c.js";import{u as q,b as K,c as te,N as R,d as ie,e as se,f as ce,a as ue}from"./entry.975454b2.js";import{P as X}from"./common.45dab837.js";import{G as J,P as me,U as de,a as pe,D as ge,b as _e,c as fe,d as ve,e as he,f as ye,g as be,h as ke}from"./requestURL.3a47c6b3.js";import{b as o,o as L,q as ee,f as m,Z as D,_ as S,$ as r,a0 as t,y as e,S as M,a6 as Z,C as ne,a9 as Y,h as N,d as oe,a8 as Q,i as Ce,J as F,G as W}from"./swiper-vue.9b7a244a.js";import{_ as xe}from"./client-only.20a0edfa.js";import{u as Pe}from"./authStore.c5358098.js";const Ie={__name:"DialogCreator",emits:["closeDialog","fetchItem"],setup(z,{emit:_}){const s=V(),y=q(),p=K(),v=o(null),g={position:"fixed",left:"50%",top:"50%",translate:"-50% -50%",zIndex:3,width:"400px",maxWidth:"90vw",maxHeight:"85vh",overflowY:"auto"},x=o("medium"),a=o([{label:"\u4E00\u822C\u7522\u54C1",value:X.General},{label:"\u51B7\u93C8\u7522\u54C1",value:X.ColdChain}]),c=o([{id:-1,label:"ABC",value:"\u5C1A\u672A\u9078\u64C7"}]),u=o({name:"",price:0,memberPrice:0,vipPrice:0,svipPrice:0,skuId:"",categoryId:c.value[0].value,attribute:a.value[0].value}),d={name:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u540D\u7A31",trigger:"blur"},price:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u4E00\u822C\u50F9\u9322"},memberPrice:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u6703\u54E1\u50F9\u9322"},vipPrice:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684VIP\u50F9\u9322"},svipPrice:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684SVIP\u50F9\u9322"},skuId:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u7DE8\u865F"}};L(async()=>{await ee(),w()});function w(){$()}async function $(){try{const h=await $fetch(`${y.public.apiBase}/${J}`),{data:n}=h;c.value=n.map(i=>({...i,label:i.name,value:i.id}))}catch{}}async function b(){console.log(u.value);try{await $fetch(`${y.public.apiBase}/${me}`,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")},body:u.value}),p.success("\u5DF2\u6210\u529F\u5EFA\u7ACB\u7522\u54C1"),_("fetchItem")}catch(h){p.error(`\u767C\u751F\u932F\u8AA4\uFF0C${h.message}`)}k()}function P(){k()}function k(){s.toggleAdminOverlay(!1),_("closeDialog")}return(h,n)=>{const i=m("n-input"),l=m("n-form-item"),f=m("n-input-number"),I=m("n-select"),U=m("n-form"),A=m("n-dialog");return D(),S(A,{style:M({...g}),title:"\u5EFA\u7ACB\u7522\u54C1",content:"","negative-text":"\u53D6\u6D88","positive-text":"\u5EFA\u7ACB","transform-origin":"center",onPositiveClick:b,onClose:P,onNegativeClick:P},{default:r(()=>[t(U,{ref_key:"formRef",ref:v,model:e(u),rules:d,size:e(x)},{default:r(()=>[t(l,{label:"\u7522\u54C1\u540D\u7A31",path:"name",style:{width:"280px"}},{default:r(()=>[t(i,{value:e(u).name,"onUpdate:value":n[0]||(n[0]=C=>e(u).name=C),placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u540D\u7A31"},null,8,["value"])]),_:1}),t(l,{label:"\u4E00\u822C\u50F9\u9322",path:"price"},{default:r(()=>[t(f,{value:e(u).price,"onUpdate:value":n[1]||(n[1]=C=>e(u).price=C),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u4E00\u822C\u50F9\u9322"},null,8,["value"])]),_:1}),t(l,{label:"\u6703\u54E1\u50F9",path:"memberPrice"},{default:r(()=>[t(f,{value:e(u).memberPrice,"onUpdate:value":n[2]||(n[2]=C=>e(u).memberPrice=C),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u6703\u54E1\u50F9\u9322"},null,8,["value"])]),_:1}),t(l,{label:"VIP\u50F9",path:"vipPrice"},{default:r(()=>[t(f,{value:e(u).vipPrice,"onUpdate:value":n[3]||(n[3]=C=>e(u).vipPrice=C),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684VIP\u50F9\u9322"},null,8,["value"])]),_:1}),t(l,{label:"SVIP\u50F9",path:"svipPrice"},{default:r(()=>[t(f,{value:e(u).svipPrice,"onUpdate:value":n[4]||(n[4]=C=>e(u).svipPrice=C),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684SVIP\u50F9\u9322"},null,8,["value"])]),_:1}),t(l,{label:"\u7522\u54C1\u7DE8\u865F",path:"skuId"},{default:r(()=>[t(i,{value:e(u).skuId,"onUpdate:value":n[5]||(n[5]=C=>e(u).skuId=C),placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7DE8\u865F"},null,8,["value"])]),_:1}),t(l,{label:"\u7522\u54C1\u5206\u985E *"},{default:r(()=>[t(I,{value:e(u).categoryId,"onUpdate:value":n[6]||(n[6]=C=>e(u).categoryId=C),options:e(c)},null,8,["value","options"])]),_:1}),t(l,{label:"\u7522\u54C1\u904B\u9001\u985E\u5225 *"},{default:r(()=>[t(I,{value:e(u).attribute,"onUpdate:value":n[7]||(n[7]=C=>e(u).attribute=C),options:e(a)},null,8,["value","options"])]),_:1})]),_:1},8,["model","size"])]),_:1},8,["style"])}}},we={__name:"DialogEditor",props:{currentItem:{default:()=>({}),type:Object}},emits:["closeDialog","fetchItem"],setup(z,{emit:_}){var n,i,l,f,I,U,A,C;const s=z,y=V(),p=q(),v=K(),g=o(null),x={position:"fixed",left:"50%",top:"50%",translate:"-50% -50%",zIndex:3,width:"400px",maxWidth:"90vw",maxHeight:"85vh",overflowY:"auto"},a=o("medium"),c=o([{label:"\u4E00\u822C\u7522\u54C1",value:X.General},{label:"\u51B7\u93C8\u7522\u54C1",value:X.ColdChain}]),u=o([{id:-1,label:"ABC",value:"\u5C1A\u672A\u9078\u64C7"}]),d=o({name:(n=s.currentItem)==null?void 0:n.name,price:(i=s.currentItem)==null?void 0:i.price,memberPrice:(l=s.currentItem)==null?void 0:l.memberPrice,vipPrice:(f=s.currentItem)==null?void 0:f.vipPrice,svipPrice:(I=s.currentItem)==null?void 0:I.svipPrice,skuId:(U=s.currentItem)==null?void 0:U.skuId,categoryId:(A=s.currentItem)==null?void 0:A.categoryId,attribute:(C=s.currentItem)==null?void 0:C.attribute}),w={name:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u540D\u7A31",trigger:"blur"},price:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u4E00\u822C\u50F9\u9322"},memberPrice:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u6703\u54E1\u50F9\u9322"},vipPrice:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684VIP\u50F9\u9322"},svipPrice:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684SVIP\u50F9\u9322"},skuId:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u7DE8\u865F"}};L(async()=>{await ee(),$()});function $(){b()}async function b(){try{const O=await $fetch(`${p.public.apiBase}/${J}`),{data:T}=O;u.value=T.map(H=>({...H,label:H.name,value:H.id}))}catch{}}async function P(){var O;console.log(d.value);try{await $fetch(`${p.public.apiBase}/${de((O=s.currentItem)==null?void 0:O.id)}`,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")},body:d.value}),v.success("\u5DF2\u6210\u529F\u66F4\u65B0\u7522\u54C1"),_("fetchItem")}catch(T){v.error(`\u767C\u751F\u932F\u8AA4\uFF0C${T.message}`)}h()}function k(){h()}function h(){y.toggleAdminOverlay(!1),_("closeDialog")}return(O,T)=>{const H=m("n-input"),B=m("n-form-item"),G=m("n-input-number"),ae=m("n-select"),le=m("n-form"),re=m("n-dialog");return D(),S(re,{style:M({...x}),title:"\u7DE8\u8F2F\u7522\u54C1",content:"","negative-text":"\u53D6\u6D88","positive-text":"\u66F4\u65B0","transform-origin":"center",onPositiveClick:P,onClose:k,onNegativeClick:k},{default:r(()=>[t(le,{ref_key:"formRef",ref:g,model:e(d),rules:w,size:e(a)},{default:r(()=>[t(B,{label:"\u7522\u54C1\u540D\u7A31",path:"name",style:{width:"280px"}},{default:r(()=>[t(H,{value:e(d).name,"onUpdate:value":T[0]||(T[0]=E=>e(d).name=E),placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u540D\u7A31"},null,8,["value"])]),_:1}),t(B,{label:"\u4E00\u822C\u50F9\u9322",path:"price"},{default:r(()=>[t(G,{value:e(d).price,"onUpdate:value":T[1]||(T[1]=E=>e(d).price=E),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u4E00\u822C\u50F9\u9322"},null,8,["value"])]),_:1}),t(B,{label:"\u6703\u54E1\u50F9",path:"memberPrice"},{default:r(()=>[t(G,{value:e(d).memberPrice,"onUpdate:value":T[2]||(T[2]=E=>e(d).memberPrice=E),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684\u6703\u54E1\u50F9\u9322"},null,8,["value"])]),_:1}),t(B,{label:"VIP\u50F9",path:"vipPrice"},{default:r(()=>[t(G,{value:e(d).vipPrice,"onUpdate:value":T[3]||(T[3]=E=>e(d).vipPrice=E),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684VIP\u50F9\u9322"},null,8,["value"])]),_:1}),t(B,{label:"SVIP\u50F9",path:"svipPrice"},{default:r(()=>[t(G,{value:e(d).svipPrice,"onUpdate:value":T[4]||(T[4]=E=>e(d).svipPrice=E),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7684SVIP\u50F9\u9322"},null,8,["value"])]),_:1}),t(B,{label:"\u7522\u54C1\u7DE8\u865F",path:"skuId"},{default:r(()=>[t(H,{value:e(d).skuId,"onUpdate:value":T[5]||(T[5]=E=>e(d).skuId=E),placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u7DE8\u865F"},null,8,["value"])]),_:1}),t(B,{label:"\u7522\u54C1\u5206\u985E *"},{default:r(()=>[t(ae,{value:e(d).categoryId,"onUpdate:value":T[6]||(T[6]=E=>e(d).categoryId=E),options:e(u)},null,8,["value","options"])]),_:1}),t(B,{label:"\u7522\u54C1\u904B\u9001\u985E\u5225 *"},{default:r(()=>[t(ae,{value:e(d).attribute,"onUpdate:value":T[7]||(T[7]=E=>e(d).attribute=E),options:e(c)},null,8,["value","options"])]),_:1})]),_:1},8,["model","size"])]),_:1},8,["style"])}}},$e={style:{position:"relative"}},Te={__name:"Table",setup(z){const _=q(),s=te(),y=K(),p=V(),v=o(!1),g=o(!1),x=o({}),a=()=>[{title:"\u540D\u7A31",key:"name"},{title:"\u5206\u985E",render:l=>{var f;return(f=u.value.find(I=>I.id===l.categoryId))==null?void 0:f.name}},{title:"\u552E\u50F9",key:"price"},{title:"\u6703\u54E1\u50F9",key:"memberPrice"},{title:"VIP\u50F9",key:"vipPrice"},{title:"SVIP\u50F9\u9322",key:"svipPrice"},{title:"\u64CD\u4F5C",key:"actions",render(l){return[N(R,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>h(l,"del")},{default:()=>"\u522A\u9664"}),N(R,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>h(l,"edit")},{default:()=>"\u7DE8\u8F2F"})]}}],c=o([]),u=o([]),d=o(a()),w=o([]),$=l=>l.id,b=o({pageSize:20});L(()=>{k()}),L(async()=>{await ee(),k(),P()});async function P(){try{const l=await $fetch(`${_.public.apiBase}/${J}`),{data:f}=l;u.value=f}catch{}}async function k(){try{const l=await $fetch(`${_.public.apiBase}/${pe}`),{data:f}=l;c.value=f}catch{}}function h(l,f=""){if(!!f){switch(f){case"del":s.warning({title:`\u662F\u5426\u78BA\u5B9A\u8981\u522A\u9664 ${l.name}`,content:"",positiveText:"\u78BA\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:async()=>{try{await $fetch(`${_.public.apiBase}/${ge(l.id)}`,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}}),y.success(`\u5DF2\u522A\u9664 ${l.name}`),k()}catch(I){y.error(`\u767C\u751F\u932F\u8AA4 ${I.message}`)}},onNegativeClick:()=>{y.info("\u5DF2\u53D6\u6D88\u672C\u6B21\u64CD\u4F5C")}});break;case"edit":x.value=l,g.value=!0,p.toggleAdminOverlay(!0);break}console.log(l)}}function n(l){w.value=l}function i(){v.value=!0,p.toggleAdminOverlay(!0)}return(l,f)=>{const I=m("n-space"),U=m("n-data-table"),A=Ie,C=we;return D(),Z("div",$e,[t(I,{horizontal:""},{default:r(()=>[t(e(R),{type:"primary",style:{margin:"12px"},onClick:i},{default:r(()=>[ne(" \u65B0\u5EFA\u7522\u54C1 ")]),_:1})]),_:1}),t(U,{columns:e(d),data:e(c),pagination:e(b),"row-key":$,style:{padding:"0 12px 16px 0"},"max-height":"100vh","onUpdate:checkedRowKeys":n},null,8,["columns","data","pagination"]),e(v)?(D(),S(A,{key:0,onCloseDialog:f[0]||(f[0]=O=>v.value=!1),onFetchItem:k})):Y("",!0),e(g)?(D(),S(C,{key:1,"current-item":e(x),onCloseDialog:f[1]||(f[1]=O=>g.value=!1),onFetchItem:k},null,8,["current-item"])):Y("",!0)])}}},De={__name:"DialogCreator",emits:["closeDialog","fetchItem"],setup(z,{emit:_}){const s=V(),y=q(),p=K(),v=o(null),g={position:"fixed",left:"50%",top:"50%",translate:"-50% -50%",zIndex:3,width:"400px",maxWidth:"90vw",maxHeight:"85vh",overflowY:"auto"},x=o("medium"),a=o({name:""}),c={name:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u985E\u5225\u540D\u7A31",trigger:"blur"}};async function u(){console.log(a.value);try{await $fetch(`${y.public.apiBase}/${_e}`,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")},body:a.value}),p.success("\u5DF2\u6210\u529F\u5EFA\u7ACB\u7522\u54C1\u985E\u5225"),_("fetchItem")}catch($){p.error(`\u767C\u751F\u932F\u8AA4\uFF0C${$.message}`)}w()}function d(){w()}function w(){s.toggleAdminOverlay(!1),_("closeDialog")}return($,b)=>{const P=m("n-input"),k=m("n-form-item"),h=m("n-form"),n=m("n-dialog");return D(),S(n,{style:M({...g}),title:"\u5EFA\u7ACB\u7522\u54C1\u985E\u5225",content:"","negative-text":"\u53D6\u6D88","positive-text":"\u5EFA\u7ACB","transform-origin":"center",onPositiveClick:u,onClose:d,onNegativeClick:d},{default:r(()=>[t(h,{ref_key:"formRef",ref:v,model:e(a),rules:c,size:e(x)},{default:r(()=>[t(k,{label:"\u985E\u5225\u540D\u7A31",path:"name",style:{width:"280px"}},{default:r(()=>[t(P,{value:e(a).name,"onUpdate:value":b[0]||(b[0]=i=>e(a).name=i),placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u985E\u5225\u540D\u7A31"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1},8,["style"])}}},Ae={__name:"DialogEditor",props:{currentItem:{default:()=>({}),type:Object}},emits:["closeDialog","fetchItem"],setup(z,{emit:_}){var k,h,n,i,l,f,I,U;const s=z,y=V(),p=q(),v=K(),g=o(null),x={position:"fixed",left:"50%",top:"50%",translate:"-50% -50%",zIndex:3,width:"400px",maxWidth:"90vw",maxHeight:"85vh",overflowY:"auto"},a=o("medium"),c=o({name:(k=s.currentItem)==null?void 0:k.name,price:(h=s.currentItem)==null?void 0:h.price,memberPrice:(n=s.currentItem)==null?void 0:n.memberPrice,vipPrice:(i=s.currentItem)==null?void 0:i.vipPrice,svipPrice:(l=s.currentItem)==null?void 0:l.svipPrice,skuId:(f=s.currentItem)==null?void 0:f.skuId,categoryId:(I=s.currentItem)==null?void 0:I.categoryId,attribute:(U=s.currentItem)==null?void 0:U.attribute}),u={name:{required:!0,message:"\u8ACB\u8F38\u5165\u7522\u54C1\u985E\u5225\u540D\u7A31",trigger:"blur"}};L(async()=>{await ee(),d()});function d(){w()}async function w(){try{const A=await $fetch(`${p.public.apiBase}/${J}`),{data:C}=A;categoryOptions.value=C.map(O=>({...O,label:O.name,value:O.id}))}catch{}}async function $(){var A;console.log(c.value);try{await $fetch(`${p.public.apiBase}/${fe((A=s.currentItem)==null?void 0:A.id)}`,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")},body:c.value}),v.success("\u5DF2\u6210\u529F\u66F4\u65B0\u7522\u54C1\u985E\u5225"),_("fetchItem")}catch(C){v.error(`\u767C\u751F\u932F\u8AA4\uFF0C${C.message}`)}P()}function b(){P()}function P(){y.toggleAdminOverlay(!1),_("closeDialog")}return(A,C)=>{const O=m("n-input"),T=m("n-form-item"),H=m("n-form"),B=m("n-dialog");return D(),S(B,{style:M({...x}),title:"\u7DE8\u8F2F\u7522\u54C1\u985E\u5225",content:"","negative-text":"\u53D6\u6D88","positive-text":"\u66F4\u65B0","transform-origin":"center",onPositiveClick:$,onClose:b,onNegativeClick:b},{default:r(()=>[t(H,{ref_key:"formRef",ref:g,model:e(c),rules:u,size:e(a)},{default:r(()=>[t(T,{label:"\u7522\u54C1\u985E\u5225\u540D\u7A31",path:"name",style:{width:"280px"}},{default:r(()=>[t(O,{value:e(c).name,"onUpdate:value":C[0]||(C[0]=G=>e(c).name=G),placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u985E\u5225\u540D\u7A31"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1},8,["style"])}}},ze={style:{position:"relative"}},Ee={__name:"Table",setup(z){const _=q(),s=te(),y=K(),p=V(),v=o(!1),g=o(!1),x=o({}),a=()=>[{title:"\u540D\u7A31",key:"name"},{title:"\u64CD\u4F5C",key:"actions",render(n){return[N(R,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>P(n,"del")},{default:()=>"\u522A\u9664"}),N(R,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>P(n,"edit")},{default:()=>"\u7DE8\u8F2F"})]}}],c=o([]),u=o(a()),d=o([]),w=n=>n.id,$=o({pageSize:20});L(()=>{b()});async function b(){try{const n=await $fetch(`${_.public.apiBase}/${J}`),{data:i}=n;c.value=i}catch{}}function P(n,i=""){if(!!i)switch(i){case"del":s.warning({title:`\u662F\u5426\u78BA\u5B9A\u8981\u522A\u9664 ${n.name}`,content:"",positiveText:"\u78BA\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:async()=>{try{await $fetch(`${_.public.apiBase}/${ve(n.id)}`,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}}),y.success(`\u5DF2\u522A\u9664 ${n.name}`),b()}catch(l){y.error(`\u767C\u751F\u932F\u8AA4 ${l.message}`)}},onNegativeClick:()=>{y.info("\u5DF2\u53D6\u6D88\u672C\u6B21\u64CD\u4F5C")}});break;case"edit":x.value=n,g.value=!0,p.toggleAdminOverlay(!0);break}}function k(n){d.value=n}function h(){v.value=!0,p.toggleAdminOverlay(!0)}return(n,i)=>{const l=m("n-space"),f=m("n-data-table"),I=De,U=Ae;return D(),Z("div",ze,[t(l,{horizontal:""},{default:r(()=>[t(e(R),{type:"primary",style:{margin:"12px"},onClick:h},{default:r(()=>[ne(" \u65B0\u5EFA\u7522\u54C1\u985E\u5225 ")]),_:1})]),_:1}),t(f,{columns:e(u),data:e(c),pagination:e($),"row-key":w,style:{padding:"0 12px 16px 0"},"max-height":"100vh","onUpdate:checkedRowKeys":k},null,8,["columns","data","pagination"]),e(v)?(D(),S(I,{key:0,onCloseDialog:i[0]||(i[0]=A=>v.value=!1),onFetchItem:b})):Y("",!0),e(g)?(D(),S(U,{key:1,"current-item":e(x),onCloseDialog:i[1]||(i[1]=A=>g.value=!1),onFetchItem:b},null,8,["current-item"])):Y("",!0)])}}},Se={__name:"DialogCreator",emits:["closeDialog","fetchProd"],setup(z,{emit:_}){const s=V(),y=q(),p=K(),v=o(null),g={position:"fixed",left:"50%",top:"50%",translate:"-50% -50%",zIndex:3,width:"400px",maxWidth:"90vw",maxHeight:"85vh",overflowY:"auto"},x=o("medium"),a=o({img:"",href:"/"}),c={img:{required:!0,message:"\u8ACB\u8F38\u5165\u6A6B\u5E45\u5716\u7247\u9023\u7D50",trigger:"blur"},href:{required:!0,message:"\u8ACB\u8F38\u5165\u9EDE\u64CA\u6A6B\u5E45\u5F8C\u524D\u5F80\u7684\u9023\u7D50"}};async function u(){try{await $fetch(`${y.public.apiBase}/${he}`,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")},body:a.value}),p.success("\u5DF2\u6210\u529F\u5EFA\u7ACB\u6A6B\u5E45"),_("fetchProd")}catch($){p.error(`\u767C\u751F\u932F\u8AA4\uFF0C${$.message}`)}w()}function d(){w()}function w(){s.toggleAdminOverlay(!1),_("closeDialog")}return($,b)=>{const P=m("n-input"),k=m("n-form-item"),h=m("n-form"),n=m("n-dialog");return D(),S(n,{style:M({...g}),title:"\u5EFA\u7ACB\u6A6B\u5E45",content:"","negative-text":"\u53D6\u6D88","positive-text":"\u5EFA\u7ACB","transform-origin":"center",onPositiveClick:u,onClose:d,onNegativeClick:d},{default:r(()=>[t(h,{ref_key:"formRef",ref:v,model:e(a),rules:c,size:e(x)},{default:r(()=>[t(k,{label:"\u6A6B\u5E45\u5716\u7247\u9023\u7D50",path:"name",style:{width:"280px"}},{default:r(()=>[t(P,{value:e(a).img,"onUpdate:value":b[0]||(b[0]=i=>e(a).img=i),placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u9023\u7D50"},null,8,["value"])]),_:1}),t(k,{label:"\u6A6B\u5E45\u524D\u5F80\u7684\u9023\u7D50",path:"name",style:{width:"280px"}},{default:r(()=>[t(P,{value:e(a).href,"onUpdate:value":b[1]||(b[1]=i=>e(a).href=i),placeholder:"\u8ACB\u8F38\u5165\u6A6B\u5E45\u524D\u5F80\u7684\u7DB2\u5740"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1},8,["style"])}}},Oe={__name:"DialogEditor",props:{currentItem:{default:()=>({}),type:Object}},emits:["closeDialog","fetchItem"],setup(z,{emit:_}){var b,P;const s=z,y=V(),p=q(),v=K(),g=o(null),x={position:"fixed",left:"50%",top:"50%",translate:"-50% -50%",zIndex:3,width:"400px",maxWidth:"90vw",maxHeight:"85vh",overflowY:"auto"},a=o("medium"),c=o({img:(b=s.currentItem)==null?void 0:b.img,href:(P=s.currentItem)==null?void 0:P.href}),u={img:{required:!0,message:"\u8ACB\u8F38\u5165\u5716\u7247\u9023\u7D50",trigger:"blur"},href:{required:!0,message:"\u8ACB\u8F38\u5165\u6A6B\u5E45\u5B50\u7DB2\u5740"}};async function d(){var k;console.log(c.value);try{await $fetch(`${p.public.apiBase}/${ye((k=s.currentItem)==null?void 0:k.id)}`,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")},body:c.value}),v.success("\u5DF2\u6210\u529F\u66F4\u65B0\u6A6B\u5E45"),_("fetchItem")}catch(h){v.error(`\u767C\u751F\u932F\u8AA4\uFF0C${h.message}`)}$()}function w(){$()}function $(){y.toggleAdminOverlay(!1),_("closeDialog")}return(k,h)=>{const n=m("n-input"),i=m("n-form-item"),l=m("n-form"),f=m("n-dialog");return D(),S(f,{style:M({...x}),title:"\u7DE8\u8F2F\u6A6B\u5E45",content:"","negative-text":"\u53D6\u6D88","positive-text":"\u66F4\u65B0","transform-origin":"center",onPositiveClick:d,onClose:w,onNegativeClick:w},{default:r(()=>[t(l,{ref_key:"formRef",ref:g,model:e(c),rules:u,size:e(a)},{default:r(()=>[t(i,{label:"\u6A6B\u5E45\u5716\u7247\u9023\u7D50",path:"img",style:{width:"280px"}},{default:r(()=>[t(n,{value:e(c).img,"onUpdate:value":h[0]||(h[0]=I=>e(c).img=I),placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u9023\u7D50"},null,8,["value"])]),_:1}),t(i,{label:"\u6A6B\u5E45\u524D\u5F80\u7684\u7DB2\u5740",path:"href",style:{width:"280px"}},{default:r(()=>[t(n,{value:e(c).href,"onUpdate:value":h[1]||(h[1]=I=>e(c).href=I),placeholder:"\u8ACB\u8F38\u5165\u5B50\u7DB2\u5740"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1},8,["style"])}}},Ue={style:{position:"relative"}},Be={__name:"Table",setup(z){const _=q(),s=te(),y=K(),p=V(),v=o(!1),g=o(!1),x=o({}),a=()=>[{title:"\u6A6B\u5E45\u7E2E\u5716",render(n){return N(ie,{width:"200",src:n.img})}},{title:"\u6A6B\u5E45\u5716\u7247\u7DB2\u5740",key:"img"},{title:"\u5B50\u9801\u9762",key:"href"},{title:"\u64CD\u4F5C",key:"actions",render(n){return[N(R,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>P(n,"del")},{default:()=>"\u522A\u9664"}),N(R,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>P(n,"edit")},{default:()=>"\u7DE8\u8F2F"})]}}],c=o([]),u=o(a()),d=o([]),w=n=>n.id,$=o({pageSize:20});L(()=>{b()});async function b(){try{const n=await $fetch(`${_.public.apiBase}/${be}`),{data:i}=n;c.value=i}catch{}}function P(n,i=""){if(!!i){switch(i){case"del":s.warning({title:"\u662F\u5426\u78BA\u5B9A\u8981\u522A\u9664\u8A72\u6A6B\u5E45",content:"",positiveText:"\u78BA\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:async()=>{try{await $fetch(`${_.public.apiBase}/${ke(n.id)}`,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}}),y.success("\u522A\u9664\u6A6B\u5E45\u6210\u529F"),b()}catch(l){y.error(`\u767C\u751F\u932F\u8AA4 ${l.message}`)}},onNegativeClick:()=>{y.info("\u5DF2\u53D6\u6D88\u672C\u6B21\u64CD\u4F5C")}});break;case"edit":x.value=n,g.value=!0,p.toggleAdminOverlay(!0);break}console.log(n)}}function k(n){d.value=n}function h(){v.value=!0,p.toggleAdminOverlay(!0)}return(n,i)=>{const l=m("n-space"),f=m("n-data-table"),I=Se,U=Oe;return D(),Z("div",Ue,[t(l,{horizontal:""},{default:r(()=>[t(e(R),{type:"primary",style:{margin:"12px"},onClick:h},{default:r(()=>[ne(" \u65B0\u5EFA\u6A6B\u5E45 ")]),_:1})]),_:1}),t(f,{columns:e(u),data:e(c),pagination:e($),"row-key":w,style:{padding:"0 12px 16px 0"},"max-height":"100vh","onUpdate:checkedRowKeys":k},null,8,["columns","data","pagination"]),e(v)?(D(),S(I,{key:0,onCloseDialog:i[0]||(i[0]=A=>v.value=!1),onFetchItem:b})):Y("",!0),e(g)?(D(),S(U,{key:1,"current-item":e(x),onCloseDialog:i[1]||(i[1]=A=>g.value=!1),onFetchItem:b},null,8,["current-item"])):Y("",!0)])}}},Re={__name:"AccountsTable",setup(z){const _=()=>[{type:"selection",disabled(a){return a.name==="Edward King 3"}},{title:"Name",key:"name"},{title:"Age",key:"age"},{title:"Address",key:"address"}],s=Array.from({length:46}).map((a,c)=>({name:`Account ${c}`,age:32,address:`London, Park Lane no. ${c}`})),y=o(_()),p=o([]),v=a=>a.address,g=o({pageSize:30});function x(a){p.value=a}return(a,c)=>{const u=m("n-data-table");return D(),S(u,{columns:e(y),data:e(s),pagination:e(g),"row-key":v,style:{padding:"0 12px 16px 0"},"max-height":"100vh","onUpdate:checkedRowKeys":x},null,8,["columns","data","pagination"])}}},Ne={__name:"OrderTable",setup(z){const _=()=>[{type:"selection",disabled(a){return a.name==="Edward King 3"}},{title:"Name",key:"name"},{title:"Age",key:"age"},{title:"Address",key:"address"}],s=Array.from({length:46}).map((a,c)=>({name:`Order ${c}`,age:32,address:`London, Park Lane no. ${c}`})),y=o(_()),p=o([]),v=a=>a.address,g=o({pageSize:30});function x(a){p.value=a}return(a,c)=>{const u=m("n-data-table");return D(),S(u,{columns:e(y),data:e(s),pagination:e(g),"row-key":v,style:{padding:"0 12px 16px 0"},"max-height":"100vh","onUpdate:checkedRowKeys":x},null,8,["columns","data","pagination"])}}},Ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},qe=Q("circle",{cx:"256",cy:"256",r:"48",fill:"currentColor"},null,-1),Ke=Q("circle",{cx:"416",cy:"256",r:"48",fill:"currentColor"},null,-1),He=Q("circle",{cx:"96",cy:"256",r:"48",fill:"currentColor"},null,-1),Le=[qe,Ke,He],j=oe({name:"EllipsisHorizontal",render:function(_,s){return D(),Z("svg",Ve,Le)}}),Ge={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ye=Q("path",{d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38c-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6z",fill:"currentColor"},null,-1),Me=Q("path",{d:"M432 480H80a31 31 0 0 1-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75c1.94 10.73-.68 21.34-7.18 29.11A31 31 0 0 1 432 480z",fill:"currentColor"},null,-1),Fe=[Ye,Me],We=oe({name:"Person",render:function(_,s){return D(),Z("svg",Ge,Fe)}}),je=oe({__name:"index",setup(z){const _=Pe(),s=se(),y=o(!0);function p(a){return()=>N(ce,null,{default:()=>N(a)})}L(()=>{_.status.loggedIn||s.push({path:"/admin/login"})});const v=o([{label:"\u7BA1\u7406\u9801\u9762",key:"manager-list",icon:p(We),children:[{icon:p(j),label:"\u6240\u6709\u7522\u54C1\u5206\u985E",key:"product-category-management-all"},{icon:p(j),label:"\u6240\u6709\u7522\u54C1",key:"product-management-all"},{icon:p(j),label:"\u6240\u6709\u6A6B\u5E45",key:"home-banner-management-all"},{icon:p(j),label:"\u6240\u6709\u7528\u6236",key:"account-management-all"},{icon:p(j),label:"\u6240\u6709\u8A02\u55AE",key:"order-management-all"}]}]),g=o("");function x(a){console.log(a)}return(a,c)=>{const u=m("n-menu"),d=m("n-layout-sider"),w=Te,$=Ee,b=Be,P=Re,k=Ne,h=m("n-layout"),n=m("n-space"),i=m("n-dialog-provider"),l=m("n-message-provider"),f=xe;return D(),S(f,null,{default:r(()=>[t(l,null,{default:r(()=>[t(i,null,{default:r(()=>[t(n,{vertical:""},{default:r(()=>[t(h,null,{default:r(()=>[t(h,{class:"sider-layout","has-sider":"",style:{height:"100vh","background-color":"#fff"}},{default:r(()=>[t(d,{bordered:"","show-trigger":"","collapse-mode":"width","collapsed-width":64,width:200,"content-style":"padding-left: 0;","native-scrollbar":!0,inverted:e(y)},{default:r(()=>[t(u,{value:e(g),"onUpdate:value":[c[0]||(c[0]=I=>Ce(g)?g.value=I:null),x],"default-expand-all":"true",inverted:e(y),"collapsed-width":64,"collapsed-icon-size":22,options:e(v)},null,8,["value","inverted","options"])]),_:1},8,["inverted"]),F(t(w,null,null,512),[[W,e(g).includes("product-management")]]),F(t($,null,null,512),[[W,e(g).includes("product-category-management")]]),F(t(b,null,null,512),[[W,e(g).includes("home-banner-management")]]),F(t(P,null,null,512),[[W,e(g).includes("account-management")]]),F(t(k,null,null,512),[[W,e(g).includes("order-management")]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});const ot=ue(je,[["__scopeId","data-v-afd2dd55"]]);export{ot as default};

import{a as B,q as M,F as N,r as V,u as F,b as Y,M as W,O as z,C as G}from"./entry.c4b0373b.js";import{b as j,c as _,o as J,_ as h,aa as t,C as l,ae as c,y as r,F as K,V as U,$ as m,a0 as f,J as k,G as R,Z as p,a8 as X,a9 as Z}from"./swiper-vue.6d0a2b42.js";import{d as H}from"./dayjs.min.af55f785.js";const i=d=>(X("data-v-15ff073c"),d=d(),Z(),d),Q={class:"full_height mt185ptb30"},tt={class:"container"},et={class:"order_div"},st={class:"order_tl"},at=i(()=>t("a",{href:"#","data-toggle":"modal","data-target":"#back",class:"back_span"},"\u7533\u8ACB\u53D6\u6D88\u8A02\u55AE",-1)),nt=i(()=>t("li",null,[l("\u53EF\u6536\u8CA8\u65E5\uFF1A"),t("span",null,c(""))],-1)),ct=i(()=>t("li",null,[l("\u767C\u7968\u985E\u578B\uFF1A"),t("span",null,c(""))],-1)),lt=i(()=>t("li",null,[l("\u767C\u7968\u62AC\u982D\uFF1A"),t("span",null,c(""))],-1)),ot=i(()=>t("li",null,[l("\u767C\u7968\u7D71\u7DE8\uFF1A"),t("span",null,c(""))],-1)),rt=i(()=>t("div",{class:"order_tl"}," \u8CFC\u7269\u6E05\u55AE ",-1)),ut={class:"cart_list"},it={class:"cart_img"},_t=["src"],dt={class:"cart_tl"},ht={class:"product-quantity"},mt={class:"cart-price text-right"},ft={class:"cart_check"},pt=i(()=>t("li",null," \u7D05\u5229\u6263\u9EDE\uFF1A"+c(0),-1)),gt={class:"border_top"},bt={class:"text-center mb-20 mt-20"},yt=i(()=>t("button",{type:"button",class:"btn btn-main btn-check"}," \u7ACB\u5373\u4ED8\u6B3E ",-1)),vt={__name:"detail",setup(d){const w=M(),g=N(),x=V(),b=F(),y=Y(),o=j({}),v=_(()=>{var e;switch((e=o.value)==null?void 0:e.orderStatus){case"WAIT_PAYMENT":return"\u5F85\u4ED8\u6B3E";case"WAIT_DELIVER":return"\u904B\u9001\u4E2D";case"WAIT_RECEIVE":return"\u5F85\u53D6\u8CA8";case"COMPLETED":return"\u5DF2\u5B8C\u6210";case"CANCELLED":return"\u5DF2\u53D6\u6D88";case"REVOKED":return"\u5DF2\u9000\u8CA8";default:return o.value.orderStatus}}),A=_(()=>{var s,n;const e=(n=(s=o.value)==null?void 0:s.items)==null?void 0:n.find(u=>u.productId===null&&(u==null?void 0:u.name)!=="\u7D05\u5229\u6298\u62B5");return(e==null?void 0:e.price)===0?"\u514D\u904B":e?e.price:"\u514D\u904B"}),O=_(()=>{var e,s;return(s=(e=o.value)==null?void 0:e.items)==null?void 0:s.reduce((n,u)=>n+u.price*u.quantity,0)}),E=_(()=>{var e,s;return(s=(e=o.value)==null?void 0:e.items)==null?void 0:s.filter(n=>n.productId!==null)}),q=_(()=>{var e;return(e=E.value)==null?void 0:e.reduce((s,n)=>s+n.price*n.quantity,0)});J(async()=>{if(!w.status.loggedIn)return x.push({path:"/login",query:{redirect:"/order"}});await I()});async function I(){var e;try{const s=(e=g.query)==null?void 0:e.id,n=await $fetch(`${b.public.apiBase}/${W(s)}`,{headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}});o.value=n.data,console.log(n)}catch(s){console.log(s)}}async function L(){var e;try{const s=(e=g.query)==null?void 0:e.id,n=await $fetch(`${b.public.apiBase}/${z(s)}`,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}});console.log(n),y.success("\u5DF2\u53D6\u6D88\u8A02\u55AE")}catch(s){y.error(s.data)}I()}function P(e){return H(e).format("YYYY/MM/DD A hh:mm")}return(e,s)=>{var u,S,D,T,C,$;const n=G;return p(),h("div",null,[t("section",Q,[t("div",tt,[t("div",et,[t("div",st,[l(" \u8A02\u55AE\u7DE8\u865F\uFF1A"),t("span",null,c((u=r(o))==null?void 0:u.id),1),at]),t("ul",null,[t("li",null,[l("\u8A02\u55AE\u72C0\u614B\uFF1A"),t("span",null,c(r(v)),1)]),t("li",null,[l("\u8A02\u55AE\u65E5\u671F\uFF1A"),t("span",null,c(P((S=r(o))==null?void 0:S.createdAt)),1)]),t("li",null,[l("\u4ED8\u6B3E\u65B9\u5F0F\uFF1A"),t("span",null,c((D=r(o))==null?void 0:D.paymentType),1)]),t("li",null,[l("\u5BC4\u9001\u65B9\u5F0F\uFF1A"),t("span",null,c(),1)]),t("li",null,[l("\u4F4F \u5740\uFF1A"),t("span",null,c((C=(T=r(o))==null?void 0:T.consignee)==null?void 0:C.addressDetailOne),1)]),nt,ct,lt,ot])]),rt,t("table",ut,[t("tbody",null,[(p(!0),h(K,null,U(r(o).items,a=>k((p(),h("tr",{key:a.name},[t("td",it,[m(n,{to:`/product?id=${a==null?void 0:a.productId}`,target:"new"},{default:f(()=>[t("img",{src:a==null?void 0:a.coverImg},null,8,_t)]),_:2},1032,["to"])]),t("td",dt,[m(n,{to:`/product?id=${a==null?void 0:a.productId}`,target:"new"},{default:f(()=>[t("h5",null,c(a.name),1)]),_:2},1032,["to"]),t("div",ht," X "+c(a.quantity),1)]),t("td",mt,[t("span",null,"$"+c((a==null?void 0:a.price)*(a==null?void 0:a.quantity)),1)])])),[[R,a.productId!==null]])),128))])]),t("ul",ft,[t("li",null," \u5546\u54C1\u91D1\u984D\u5C0F\u8A08 (\u5171"+c(($=r(E))==null?void 0:$.length)+"\u9805\u5546\u54C1)\uFF1A$"+c(r(q)),1),t("li",null," \u904B\u8CBB\uFF1A"+c(r(A)),1),pt,t("li",gt,[l(" \u8A02\u55AE\u7E3D\u91D1\u984D\uFF1A"),t("span",null,"$"+c(r(O)),1)])]),t("div",bt,[m(n,{to:"/order",type:"button",class:"btn btn-main btn-default"},{default:f(()=>[l(" \u56DE\u4E0A\u4E00\u9801 ")]),_:1}),k(t("button",{type:"button",class:"btn btn-main btn-default","data-toggle":"modal",onClick:L}," \u53D6\u6D88\u8A02\u55AE ",512),[[R,r(v)!=="\u5DF2\u53D6\u6D88"]]),yt])])])])}}},Dt=B(vt,[["__scopeId","data-v-15ff073c"]]);export{Dt as default};

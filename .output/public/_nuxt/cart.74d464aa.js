import{a as R,F as M,r as D,q as U,H as j,C as z}from"./entry.981b651e.js";import{b as E,w as H,c as v,o as J,_ as y,aa as e,$ as h,a0 as p,ad as N,y as s,J as f,G as b,ae as d,F as O,V as Z,C as _,ab as K,f as Q,Z as m,a8 as W,a9 as X}from"./swiper-vue.6d0a2b42.js";import{P as o}from"./common.cb49f5bd.js";const C=g=>(W("data-v-9f734aee"),g=g(),X(),g),Y={class:"full_height mt-30 mt185ptb30"},S={class:"cart_container mb-50"},ee={class:"list-inline dashboard-menu text-center"},te={class:"text-center",style:{margin:"72px 0"}},se=C(()=>e("i",{class:"fa-solid fa-cart-shopping"},null,-1)),ae=C(()=>e("h2",{class:"text-center"}," \u8CFC\u7269\u8ECA\u6C92\u6709\u6771\u897F ",-1)),ne={key:0,method:"post",action:"javascript:;"},ce={class:"cart_list"},oe={class:"cart_img"},re=["href"],le=["src"],ue={class:"cart_tl"},de=["href"],_e=C(()=>e("span",null,"\u6EFF\u984D\u514D\u904B",-1)),ie={class:"cart_price text-right"},he={class:"cart_price text-right"},pe=["onClick"],fe=C(()=>e("i",{class:"fa-solid fa-trash-can"},null,-1)),be=[fe],ge={class:"cart_check"},ve={class:"text-right mb-20 mt-20"},ye=["disabled"],me={class:"alert alert-warning alert-common",role:"alert"},Ce={__name:"cart",setup(g){const x=M(),k=D(),B=M(),c=U(),n=j(),i=E(o.General);H(x,t=>{V()});const l=v(()=>{switch(i.value){case o.ColdChain:return n==null?void 0:n.merch.filter(t=>t.attribute===o.ColdChain);default:return n==null?void 0:n.merch.filter(t=>t.attribute===o.General)}}),w=v(()=>n==null?void 0:n.merch.filter(t=>t.attribute===o.ColdChain)),I=v(()=>n==null?void 0:n.merch.filter(t=>t.attribute===o.General)),P=v({get:()=>l.value.reduce((t,u)=>t+L(u)*u.amount,0),set:t=>{P.value=t}});J(()=>{V()});const L=t=>{var u,r;return((u=c==null?void 0:c.user)==null?void 0:u.memberLevel)==="SVIP"?t==null?void 0:t.svipPrice:((r=c==null?void 0:c.user)==null?void 0:r.memberLevel)==="VIP"?t==null?void 0:t.vipPrice:c.status.loggedIn?t==null?void 0:t.memberPrice:t==null?void 0:t.price};function V(){switch(x.query.type){case"cold-chain":i.value=o.ColdChain;break;default:i.value=o.General;break}}function T(t){const u=n.merch.filter(r=>r.id!==t.id);n.updateMerch(u)}function A(){if(!c.status.loggedIn)return k.push({path:"/login",query:{...B.query,redirect:"/cart"}});k.push({path:"/checkout",query:{...x.query}})}return(t,u)=>{const r=z,F=Q("n-input-number");return m(),y("div",Y,[e("div",S,[e("ul",ee,[e("li",null,[h(r,{to:"/cart",class:N(["type-name",{active:s(i)===s(o).General}])},{default:p(()=>[_(" \u4E00\u822C\u7269\u6D41\u5546\u54C1 "),f(e("span",{class:"cart-amount"},d(s(I).length),513),[[b,s(I).length]])]),_:1},8,["class"])]),e("li",null,[h(r,{to:"/cart?type=cold-chain",class:N(["type-name",{active:s(i)===s(o).ColdChain}])},{default:p(()=>[_(" \u7279\u6B8A\u7269\u6D41\u5546\u54C1 "),f(e("span",{class:"cart-amount"},d(s(w).length),513),[[b,s(w).length]])]),_:1},8,["class"])])]),f(e("div",te,[se,ae,h(r,{to:"/shop"},{default:p(()=>[_(" \u8D95\u7DCA\u53BB\u6DFB\u52A0 ")]),_:1})],512),[[b,!s(l).length]]),s(l).length?(m(),y("form",ne,[e("div",null,"\u5171"+d(s(l).length)+"\u9805\u5546\u54C1",1),e("table",ce,[e("tbody",null,[(m(!0),y(O,null,Z(s(l),a=>{var $,q;return m(),y("tr",{key:a.id,class:"prod-tr"},[e("td",oe,[e("a",{href:`/product?id=${a.id}`},[e("img",{src:a==null?void 0:a.coverImg},null,8,le)],8,re)]),e("td",ue,[e("a",{href:`/product?id=${a.id}`},[e("h5",null,d(a==null?void 0:a.name),1)],8,de),h(F,{value:a.amount,"onUpdate:value":G=>a.amount=G,min:1,style:{width:"150px"}},{default:p(()=>[_e]),_:2},1032,["value","onUpdate:value"])]),e("td",ie,[f(e("span",null," \u5E02\u50F9 $"+d(a==null?void 0:a.price),513),[[b,(($=s(c).user)==null?void 0:$.memberLevel)&&((q=s(c).user)==null?void 0:q.memberLevel)!=="NORMAL"]]),_(" \u50F9\u9322 $"+d(L(a)),1)]),e("td",he,[e("button",{type:"button",class:"del_btn",onClick:G=>T(a)},be,8,pe)])])}),128))])]),e("ul",ge,[e("li",null,[_(" \u5546\u54C1\u91D1\u984D\u5C0F\u8A08 (\u5171"+d(s(l).length)+"\u9805\u5546\u54C1)\uFF1A",1),e("span",null,"$"+d(s(P)),1)])]),e("div",ve,[h(r,{type:"button",class:"btn btn-main btn-bag",to:"/shop"},{default:p(()=>[_(" \u7E7C\u7E8C\u8CFC\u7269 ")]),_:1}),e("button",{type:"submit",class:"btn btn-main btn-check",disabled:s(l).length<=0,onClick:A}," \u4E0B\u4E00\u6B65 ",8,ye)])])):K("",!0),f(e("div",me," \u8CBC\u5FC3\u63D0\u9192: \u4E00\u822C\u5E38\u6EAB\u5546\u54C1,\u7121\u6CD5\u8207\u51B7\u934A\u5546\u54C1\u540C\u6642\u51FA\u8CA8, \u656C\u8ACB\u5206\u958B\u7D50\u5E33,\u8B1D\u8B1D\u60A8 ",512),[[b,s(l).length]])])])}}},Ie=R(Ce,[["__scopeId","data-v-9f734aee"]]);export{Ie as default};

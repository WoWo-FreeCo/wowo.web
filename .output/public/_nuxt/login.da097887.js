import{_ as g}from"./client-only.2d3cf038.js";import{q as b,u as y,t as u,A as v}from"./entry.b37249e1.js";import{b as w,o as T,a3 as $,a0 as B,Z as x,aa as e,J as d,af as p,y as n,C as m}from"./swiper-vue.cf16a99e.js";import{u as k}from"./authStore.ff99c219.js";const A={class:"full_height mt185ptb30"},S={class:"container"},C=e("h3",{class:"login_tl"},[m(" \u7BA1\u7406\u8005\u767B\u5165"),e("br"),m("Login ")],-1),E={class:"contact-form"},I={id:"",method:"post",action:"javascript:;"},L={class:"form-group"},N={class:"form-group"},q={__name:"login",setup(G){const _=b(),s=k(),i=y(),a=w({email:"",password:""});T(async()=>{const t=localStorage.getItem("accessToken");if(t){try{const o=await $fetch(`${i.public.apiBase}/${u}`,{method:"GET",headers:{Authorization:"Bearer "+t}});s.loginSuccess(t),s.updateUser(o.data)}catch{s.logout()}l()}});async function f(){try{const t=await $fetch(`${i.public.apiBase}/${v}`,{method:"POST",body:a.value});h(t.data),console.log(t)}catch(t){console.log(t),t.statusCode&&alert("\u8ACB\u8F38\u5165\u6B63\u78BA\u7684\u7BA1\u7406\u5E33\u865F\u53CA\u5BC6\u78BC")}}async function h(t){const{accessToken:o}=t;s.loginSuccess(o);const c=await $fetch(`${i.public.apiBase}/${u}`,{method:"GET",headers:{Authorization:"Bearer "+o}});s.updateUser(c.data),l()}function l(){_.push("/admin")}return(t,o)=>{const c=g;return x(),$(c,null,{default:B(()=>[e("section",A,[e("div",S,[C,e("div",E,[e("form",I,[e("div",L,[d(e("input",{id:"input-field-email","onUpdate:modelValue":o[0]||(o[0]=r=>n(a).email=r),type:"email",placeholder:"Email*",class:"form-control",name:"",required:""},null,512),[[p,n(a).email]])]),e("div",N,[d(e("input",{id:"input-field-password","onUpdate:modelValue":o[1]||(o[1]=r=>n(a).password=r),autocomplete:"",type:"password",placeholder:"\u5BC6\u78BC*",class:"form-control",name:"",required:""},null,512),[[p,n(a).password]])]),e("div",{class:"text-center"},[e("input",{id:"input-field-submit",type:"submit",class:"btn btn-main btn-bag",value:"\u7BA1\u7406\u8005\u767B\u5165",onClick:f})])])])])])]),_:1})}}};export{q as default};

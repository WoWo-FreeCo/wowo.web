import{j as k,e as v,u as x,k as w}from"./entry.c15e215c.js";import{_ as $}from"./client-only.535fc844.js";import{b as T,o as B,_ as L,$ as p,Z as S,a8 as t,J as f,af as m,y as c,C as o,a0 as E}from"./swiper-vue.db7c70f4.js";import{u as R}from"./authStore.bb8876e2.js";import{n as _,o as C}from"./requestURL.5272b7f6.js";const G={class:"full_height mt185ptb30"},N={class:"container"},U=t("h3",{class:"login_tl"},[o(" \u6703\u54E1\u767B\u5165"),t("br"),o("Login ")],-1),V=t("div",{class:"social_login"},[o(" \u4F7F\u7528\uFF1A "),t("a",{href:"",class:"btn btn-check bg-facebook",style:{margin:"3px"}},[t("i",{class:"fa-brands fa-facebook-f"}),o(" facebook\u5E33\u865F\u767B\u5165 ")]),t("a",{href:"",class:"btn btn-check bg-google",style:{margin:"3px"}},[t("i",{class:"fa-brands fa-google-plus-g"}),o(" Google\u5E33\u865F\u767B\u5165 ")]),t("a",{href:"",class:"btn btn-check bg-line",style:{margin:"3px"}},[t("i",{class:"fa-brands fa-line"}),o(" Line\u5E33\u865F\u767B\u5165 ")])],-1),q={class:"contact-form"},P={id:"",method:"post",action:"javascript:;"},A={class:"form-group"},I={class:"form-group"},O=t("div",{class:"text-center mt-30"},[t("i",{class:"fa-regular fa-circle-question"}),t("a",{href:"forgotten.html"},"\u5FD8\u8A18\u5BC6\u78BC?")],-1),j={class:"other_function"},H={__name:"login",setup(z){const h=k(),u=v(),a=R(),i=x(),n=T({email:"",password:""});B(async()=>{const e=localStorage.getItem("accessToken");if(e){try{const s=await $fetch(`${i.public.apiBase}/${_}`,{method:"GET",headers:{Authorization:"Bearer "+e}});a.loginSuccess(e),a.updateUser(s.data)}catch{a.logout()}d()}});async function g(){try{const e=await $fetch(`${i.public.apiBase}/${C}`,{method:"POST",body:n.value});console.log(e),b(e.data)}catch(e){e.statusCode&&alert("\u8ACB\u8F38\u5165\u6B63\u78BA\u7684\u5E33\u865F\u53CA\u5BC6\u78BC")}}async function b(e){const{accessToken:s}=e;a.loginSuccess(s);const r=await $fetch(`${i.public.apiBase}/${_}`,{method:"GET",headers:{Authorization:"Bearer "+s}});a.updateUser(r.data),d()}function d(){var s;const e=(s=h.query)==null?void 0:s.redirect;e?u.push({path:e}):u.push({path:"/profile"})}return(e,s)=>{const r=w,y=$;return S(),L(y,null,{default:p(()=>[t("section",G,[t("div",N,[U,V,t("div",q,[t("form",P,[t("div",A,[f(t("input",{id:"input-field-email","onUpdate:modelValue":s[0]||(s[0]=l=>c(n).email=l),type:"email",placeholder:"Email*",class:"form-control",name:"",required:""},null,512),[[m,c(n).email]])]),t("div",I,[f(t("input",{id:"input-field-password","onUpdate:modelValue":s[1]||(s[1]=l=>c(n).password=l),autocomplete:"",type:"password",placeholder:"\u5BC6\u78BC*",class:"form-control",name:"",required:""},null,512),[[m,c(n).password]])]),t("div",{class:"text-center"},[t("input",{id:"input-field-submit",type:"submit",class:"btn btn-main btn-bag",value:"\u6211\u8981\u767B\u5165",onClick:g})])]),O,t("div",j,[o(" \u6C92\u6709\u5E33\u865F? "),E(r,{class:"btn btn-block btn-bag",to:"/register"},{default:p(()=>[o(" \u6703\u54E1\u8A3B\u518A ")]),_:1})])])])])]),_:1})}}};export{H as default};

import{a as Y,u as Z,q as K,H as Q,k as W,c as X,f as m,C as ss}from"./entry.6d10207d.js";import{b as v,w as as,o as es,q as os,_ as i,y as n,a3 as O,a0 as f,ab as ns,aa as a,F as P,V as I,J as M,G as B,$ as C,ak as ts,Z as r,al as cs,am as rs,ad as p,ae as d,C as h,an as ls,a8 as ds,a9 as _s}from"./swiper-vue.6d0a2b42.js";import{u as us}from"./cookie.cd8dbb5a.js";const _=b=>(ds("data-v-41f7bdb0"),b=b(),_s(),b),is=_(()=>a("div",{class:"skeleton"},null,-1)),fs=["src"],ps={class:"text-center full_height"},hs={class:"sub_menubar"},vs={class:"container tabCommon"},bs={class:"nav nav-tabs bbottom_none labels-flex"},ks=["onClick"],Cs={href:"javascript:;","data-toggle":"tab"},xs={class:"container tabCommon"},$s={class:"tab-content text-left"},Ss={id:"cate_1",class:"tab-pane fade active in"},gs={class:"index_pslide"},ws=["onClick"],ys={class:"product_img card"},Ps=_(()=>a("div",{class:"skeleton"},null,-1)),Is=["src"],Ms=_(()=>a("span",null,"\u5E02\u50F9",-1)),Bs=_(()=>a("span",null,"\u6703\u54E1",-1)),Ts=_(()=>a("span",null,"VIP",-1)),Ls=_(()=>a("span",null,"SVIP",-1)),Vs=["onClick"],As=_(()=>a("button",null,[a("i",{class:"fa-solid fa-cart-shopping"})],-1)),Es=[As],Ns={class:"not-found"},Os={__name:"index",setup(b){const x=Z(),R=us("emap_711",{maxAge:60*60*24}),$={id:-1,name:"\u6240\u6709\u7522\u54C1"},S=v($.id),T=v([]),g=v([]),w=v([]),k=K(),t=Q(),D=Array.from({length:30},()=>({type:"fake"})),u=v(D);as(S,e=>{if(e===$.id){u.value=g.value;return}u.value=g.value.filter(o=>o.categoryId===e)}),es(async()=>{await os(),F(),console.log(R.value)});function F(){G(),q(),H()}async function G(){try{const e=await $fetch(`${x.public.apiBase}/${W}`),{data:o}=e;w.value=o,console.log(o)}catch{}}async function q(){try{const e=await $fetch(`${x.public.apiBase}/${X}`),{data:o}=e;T.value=[$,...o]}catch{}}async function H(){try{const e=await $fetch(`${x.public.apiBase}/${m}?take=30`),{data:o}=e;g.value=o,u.value=o,console.log(u.value,o)}catch{}}function L(e){var o;return(o=t.favMerch)==null?void 0:o.find(c=>c.id===(e==null?void 0:e.id))}function U(e){t.favMerch.find(l=>l.id===(e==null?void 0:e.id))?t.favMerch=t.favMerch.filter(l=>l.id!==(e==null?void 0:e.id)):t.favMerch.push(e);const c=t.favMerch;t.updateFavMerch(c)}function j(e){const o=t.merch.find(l=>l.id===e.id);o?o.amount++:t.merch.push({...e,amount:1});const c=t.merch;t.updateMerch(c)}return(e,o)=>{const c=ss,l=ls,z=ts;return r(),i("div",null,[n(w)?(r(),O(z,{key:0,class:"swiper-root",modules:[n(cs),n(rs)],"slides-per-view":1,loop:!0,effect:"creative",autoplay:{delay:4e3,disableOnInteraction:!0},"creative-effect":{prev:{shadow:!1,translate:["-20%",0,-1]},next:{translate:["100%",0,0]}}},{default:f(()=>[is,(r(!0),i(P,null,I(n(w),s=>(r(),O(l,{key:s.id},{default:f(()=>[C(c,{to:`${s.href}`},{default:f(()=>[a("img",{src:s.img,alt:""},null,8,fs)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["modules"])):ns("",!0),a("section",ps,[a("div",hs,[a("div",vs,[a("ul",bs,[(r(!0),i(P,null,I(n(T),s=>(r(),i("li",{key:s.id,class:p({active:n(S)===(s==null?void 0:s.id)}),onClick:y=>S.value=s==null?void 0:s.id},[a("a",Cs,d(s.name),1)],10,ks))),128))])])]),a("div",xs,[a("div",$s,[a("div",Ss,[a("div",gs,[(r(!0),i(P,null,I(n(u),s=>{var y,V,A,E,N;return M((r(),i("div",{key:s==null?void 0:s.id,class:"product_frame"},[a("button",{class:"add_like",onClick:J=>U(s)},[a("i",{class:p(["far fa-heart",{"fa-solid":L(s),"fa-heart":L(s)}])},null,2)],8,ws),M(a("div",{class:"hot_sale2"},d(s.brief),513),[[B,s==null?void 0:s.brief]]),a("div",ys,[Ps,C(c,{to:`/product?id=${s==null?void 0:s.id}`},{default:f(()=>[a("img",{src:s==null?void 0:s.coverImg,alt:""},null,8,Is)]),_:2},1032,["to"])]),a("h3",null,[C(c,{to:`/product?id=${s==null?void 0:s.id}`},{default:f(()=>[h(d(s.name),1)]),_:2},1032,["to"])]),a("ul",null,[a("li",{class:p({vip_price:!((y=n(k).user)!=null&&y.memberLevel)})},[h(" $"+d(s==null?void 0:s.price)+" ",1),Ms],2),a("li",{class:p({vip_price:((V=n(k).user)==null?void 0:V.memberLevel)==="NORMAL"})},[h(" $"+d(s==null?void 0:s.memberPrice)+" ",1),Bs],2),a("li",{class:p({vip_price:((A=n(k).user)==null?void 0:A.memberLevel)==="VIP"})},[h(" $"+d(s==null?void 0:s.vipPrice)+" ",1),Ts],2),a("li",{class:p({vip_price:((E=n(k).user)==null?void 0:E.memberLevel)==="SVIP"})},[h(" $"+d(s==null?void 0:s.svipPrice)+" ",1),Ls],2),a("li",{onClick:J=>j(s)},Es,8,Vs)])])),[[B,((N=s==null?void 0:s.inventory)==null?void 0:N.quantity)>=1||(s==null?void 0:s.type)==="fake"]])}),128)),M(a("span",Ns,"\u76EE\u524D\u6C92\u6709\u8A72\u985E\u5225\u7684\u7522\u54C1",512),[[B,!n(u).length]])])])]),C(c,{to:"/shop?category=-1",class:"btn btn-main btn-large btn-more mt-20 more-prod"},{default:f(()=>[h(" \u66F4\u591A\u5546\u54C1 ")]),_:1})])])])}}},Gs=Y(Os,[["__scopeId","data-v-41f7bdb0"]]);export{Gs as default};

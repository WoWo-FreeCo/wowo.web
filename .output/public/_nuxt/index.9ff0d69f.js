import{_ as B,a as I}from"./ProfileSidebar.081b1774.js";import{a as G,g as L,e as V,f as M,m as Y,u as q,o as i,C as z,O as a,B as F,k as U}from"./entry.355d3b90.js";import{b as m,c as j,o as J,_ as d,aa as e,$ as C,ae as g,y as l,J as R,an as Z,i as H,F as K,V as Q,G as X,Z as u,ac as r,a0 as tt,C as et,ab as D,a8 as at,a9 as st,a7 as nt}from"./swiper-vue.2e988726.js";import{d as ot}from"./dayjs.min.6d3dc673.js";import"./pageStatusStore.9a177b98.js";const x=_=>(at("data-v-d7d0f699"),_=_(),st(),_),lt={class:"full_height mt185ptb30 pt0"},it={class:"row"},ct={class:"col-sm-9 pl20pr30"},dt={class:"list-inline dashboard-menu"},ut={class:"select r0t0"},rt=x(()=>e("option",{value:"-1"}," \u8A02\u55AE\u72C0\u614B ",-1)),_t=["value"],ht=["value"],vt=["value"],ft=["value"],pt=["value"],mt=["value"],Ct={class:"member_table order_table"},bt=x(()=>e("thead",null,[e("tr",null,[e("th",null," \u8A02\u55AE\u7DE8\u865F "),e("th",null," \u8A02\u55AE\u65E5\u671F "),e("th",null," \u4ED8\u6B3E\u65B9\u5F0F "),e("th",null," \u8A02\u55AE\u91D1\u984D "),e("th",null," \u8A02\u55AE\u72C0\u614B "),e("th")])],-1)),St={"data-th":"\u8A02\u55AE\u7DE8\u865F"},yt={"data-th":"\u8A02\u55AE\u65E5\u671F"},kt={"data-th":"\u8A02\u55AE\u985E\u578B"},gt={"data-th":"\u8A02\u55AE\u91D1\u984D"},Rt={"data-th":"\u8A02\u55AE\u72C0\u614B"},Dt={class:"action-btns"},xt=["onClick"],Wt=["onClick"],$t={class:"text-center"},wt=nt('<ul class="pagination post-pagination" data-v-d7d0f699><li data-v-d7d0f699><a href="#!" data-v-d7d0f699>\u4E0A\u4E00\u9801</a></li><li class="active" data-v-d7d0f699><a href="#!" data-v-d7d0f699>1</a></li><li data-v-d7d0f699><a href="#!" data-v-d7d0f699>2</a></li><li data-v-d7d0f699><a href="#!" data-v-d7d0f699>3</a></li><li data-v-d7d0f699><a href="#!" data-v-d7d0f699>4</a></li><li data-v-d7d0f699><a href="#!" data-v-d7d0f699>5</a></li><li data-v-d7d0f699><a href="#!" data-v-d7d0f699>\u4E0B\u4E00\u9801</a></li></ul>',1),Et=[wt],Pt={__name:"index",setup(_){const W=L(),f=V(),b=M(),S=Y(),y=q(),p=m([]),h=m(-1),c=m(i.General),$=j(()=>{var o,v;let t=[];switch(c.value){case i.ColdChain:t=[...(o=p.value)==null?void 0:o.filter(n=>n.attribute===i.ColdChain)];break;default:t=[...(v=p.value)==null?void 0:v.filter(n=>n.attribute===i.General)];break}switch(h.value){case a.WaitPayment:return t==null?void 0:t.filter(n=>n.orderStatus===a.WaitPayment);case a.WaitDeliver:return t==null?void 0:t.filter(n=>n.orderStatus===a.WaitDeliver);case a.WaitReceive:return t==null?void 0:t.filter(n=>n.orderStatus===a.WaitReceive);case a.Completed:return t==null?void 0:t.filter(n=>n.orderStatus===a.Completed);case a.Cancelled:return t==null?void 0:t.filter(n=>n.orderStatus===a.Cancelled);case a.Revoked:return t==null?void 0:t.filter(n=>n.orderStatus===a.Revoked);default:return t}}),w=t=>{switch(t==null?void 0:t.orderStatus){case a.WaitPayment:return"\u5F85\u4ED8\u6B3E";case a.WaitDeliver:return"\u5F85\u51FA\u8CA8";case a.WaitReceive:return"\u5DF2\u51FA\u8CA8";case a.Completed:return"\u5DF2\u5B8C\u6210";case a.Cancelled:return"\u5DF2\u53D6\u6D88";case a.Revoked:return"\u5DF2\u9000\u8CA8";default:return curOrder.value.orderStatus}};function E(t){return ot(t).format("YYYY/MM/DD A hh:mm")}const P=t=>(t==null?void 0:t.attribute)===i.General?"\u4E00\u822C\u7269\u6D41\u5546\u54C1":(t==null?void 0:t.attribute)===i.ColdChain?"\u7279\u6B8A\u7269\u6D41\u5546\u54C1":t.attribute;J(async()=>{var t;if(!W.status.loggedIn)return b.push({path:"/login",query:{...S.query,redirect:"/order"}});((t=S.query)==null?void 0:t.payment)==="successful"&&(f.success("\u5DF2\u6210\u529F\u4ED8\u6B3E\uFF01"),b.replace({query:null})),await k()});async function k(){try{const t=await $fetch(`${y.public.apiBase}/${z}?take=200`,{headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}});console.log(t),p.value=t.data}catch(t){console.log(t)}}async function N(t){try{const o=t==null?void 0:t.id;await $fetch(`${y.public.apiBase}/${F(o)}`,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}}),f.success("\u5DF2\u53D6\u6D88\u8A02\u55AE")}catch(o){f.error(o.data)}k()}async function T(t){console.log(t)}return(t,o)=>{const v=B,n=I,A=U;return u(),d("div",null,[e("section",lt,[C(v),e("div",it,[C(n),e("div",ct,[e("ul",dt,[e("li",null,[e("a",{class:g(["pointer",{active:l(c)===l(i).General}]),onClick:o[0]||(o[0]=s=>c.value=l(i).General)}," \u4E00\u822C\u7269\u6D41\u5546\u54C1 ",2)]),e("li",null,[e("a",{class:g(["pointer",{active:l(c)===l(i).ColdChain}]),onClick:o[1]||(o[1]=s=>c.value=l(i).ColdChain)}," \u7279\u6B8A\u7269\u6D41\u5546\u54C1 ",2)])]),e("div",ut,[R(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>H(h)?h.value=s:null)},[rt,e("option",{value:l(a).WaitPayment}," \u5F85\u4ED8\u6B3E ",8,_t),e("option",{value:l(a).WaitDeliver}," \u904B\u9001\u4E2D ",8,ht),e("option",{value:l(a).WaitReceive}," \u5F85\u53D6\u8CA8 ",8,vt),e("option",{value:l(a).Completed}," \u5DF2\u5B8C\u6210 ",8,ft),e("option",{value:l(a).Cancelled}," \u5DF2\u53D6\u6D88 ",8,pt),e("option",{value:l(a).Revoked}," \u9000\u8CA8 ",8,mt)],512),[[Z,l(h)]])]),e("table",Ct,[bt,e("tbody",null,[(u(!0),d(K,null,Q(l($),s=>(u(),d("tr",{key:s.id},[e("td",St,r(s==null?void 0:s.id),1),e("td",yt,r(E(s==null?void 0:s.createdAt)),1),e("td",kt,r(P(s)),1),e("td",gt,r(s==null?void 0:s.price),1),e("td",Rt,r(w(s)),1),e("td",Dt,[C(A,{to:`/order/detail?id=${s.id}`,class:"btn btn-orderdetial"},{default:tt(()=>[et(" \u67E5\u770B\u660E\u7D30 ")]),_:2},1032,["to"]),s.orderStatus!=="CANCELLED"?(u(),d("button",{key:0,type:"button",class:"btn btn-orderdetial cancel-btn",onClick:O=>N(s)}," \u53D6\u6D88\u8A02\u55AE ",8,xt)):D("",!0),s.orderStatus!=="WAIT_PAYMENT"&&s.orderStatus!=="CANCELLED"?(u(),d("button",{key:1,type:"button",class:"btn btn-orderdetial cancel-btn",onClick:O=>T(s)}," \u7533\u8ACB\u9000\u8CA8 ",8,Wt)):D("",!0)])]))),128))])]),R(e("div",$t,Et,512),[[X,!1]])])])])])}}},It=G(Pt,[["__scopeId","data-v-d7d0f699"]]);export{It as default};

import{_ as b}from"./client-only.73480984.js";import{E as y,q as w,u as v,z as d,K as T}from"./entry.c9000b64.js";import{b as $,o as B,a3 as x,a0 as E,Z as S,aa as o,J as p,af as m,y as n,C as f}from"./swiper-vue.d582d122.js";import{u as k}from"./authStore.1f47292a.js";const R={class:"full_height mt185ptb30"},C={class:"container"},U=o("h3",{class:"login_tl"},[f(" \u5FD8\u8A18\u5BC6\u78BC"),o("br"),f("Forget password ")],-1),q={class:"contact-form"},G={id:"",method:"post",action:"javascript:;"},L={class:"form-group"},P={class:"form-group"},N={__name:"forget",setup(V){const h=y(),l=w(),s=k(),i=v(),a=$({email:"",password:""});B(async()=>{const t=localStorage.getItem("accessToken");if(t){try{const e=await $fetch(`${i.public.apiBase}/${d}`,{method:"GET",headers:{Authorization:"Bearer "+t}});s.loginSuccess(t),s.updateUser(e.data)}catch{s.logout()}u()}});async function _(){try{const t=await $fetch(`${i.public.apiBase}/${T}`,{method:"POST",body:a.value});console.log(t),g(t.data)}catch(t){t.statusCode&&alert("\u8ACB\u8F38\u5165\u6B63\u78BA\u7684\u5E33\u865F\u53CA\u5BC6\u78BC")}}async function g(t){const{accessToken:e}=t;s.loginSuccess(e);const r=await $fetch(`${i.public.apiBase}/${d}`,{method:"GET",headers:{Authorization:"Bearer "+e}});s.updateUser(r.data),u()}function u(){var e;const t=(e=h.query)==null?void 0:e.redirect;t?l.push({path:t}):l.push({path:"/profile"})}return(t,e)=>{const r=b;return S(),x(r,null,{default:E(()=>[o("section",R,[o("div",C,[U,o("div",q,[o("form",G,[o("div",L,[p(o("input",{id:"input-field-email","onUpdate:modelValue":e[0]||(e[0]=c=>n(a).email=c),type:"email",placeholder:"Email*",class:"form-control",name:"",required:""},null,512),[[m,n(a).email]])]),o("div",P,[p(o("input",{id:"input-field-password","onUpdate:modelValue":e[1]||(e[1]=c=>n(a).password=c),autocomplete:"",type:"password",placeholder:"\u5BC6\u78BC*",class:"form-control",name:"",required:""},null,512),[[m,n(a).password]])]),o("div",{class:"text-center"},[o("input",{id:"input-field-submit",type:"submit",class:"btn btn-main btn-bag",value:"\u9001\u51FA",onClick:_})])])])])])]),_:1})}}};export{N as default};

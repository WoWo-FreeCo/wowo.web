import{a as Y,u as Z,E as K,F as Q,c as W,f as m,B as X}from"./entry.c9000b64.js";import{b as i,o as aa,q as oa,_ as u,aa as o,y as e,ad as V,F as D,V as E,ae as d,J as N,G as F,Z as _,$ as k,a0 as I,C as p,a8 as ea,a9 as sa}from"./swiper-vue.d582d122.js";const h=v=>(ea("data-v-66b46908"),v=v(),sa(),v),ta={class:"full_height mt-120"},ca={class:"row"},na={class:"col-sm-3 p-0 bg_left2"},la={id:"accordion",class:"panel-group commonAccordion",role:"tablist","aria-multiselectable":"true"},ra={class:"panel panel-default"},da={id:"headingOne",class:"panel-heading",role:"tab"},ia={class:"panel-title"},ua={class:"col-sm-9 pl20pr30"},_a={class:"breadcrumb"},pa=h(()=>o("li",null,[o("a",{href:"/"},"Home")],-1)),ha=h(()=>o("li",null,"\u7522\u54C1\u4ECB\u7D39",-1)),ga={class:"active"},fa={class:"row"},va={class:"flex-row col-lg-4 col-md-6 col-sm-12"},ya={class:"hot_sale2"},$a={class:"product_img"},ba=["src"],Ca=h(()=>o("span",null,"\u5E02\u5834\u50F9",-1)),ka=h(()=>o("span",null,"\u6703\u54E1\u50F9",-1)),Ia=h(()=>o("span",null,"VIP\u50F9",-1)),Pa=h(()=>o("span",null,"SVIP\u50F9",-1)),xa=["onClick"],wa=h(()=>o("i",{class:"fa-solid fa-cart-shopping"},null,-1)),qa=[wa],Ta={class:"not-found"},Ba={class:"text-center"},Sa={class:"pagination post-pagination"},ma={__name:"shop",setup(v){const y=Z(),n=K(),O={id:-1,name:"\u6240\u6709\u7522\u54C1"},f=i(O.id),R=i(1),$=i([]),P=i(1),x=i([]),M=i([]),b=Q(),w=i(!1),q=i([]);aa(async()=>{await oa(),U()});function U(){var s;j(),T({_categoryId:((s=n.query)==null?void 0:s.category)||-1})}async function j(){var s,t,c;try{const l=(s=n.query)==null?void 0:s.category,a=await $fetch(`${y.public.apiBase}/${W}`),{data:r}=a;let g=`categoryId=${l}`;(((t=n.query)==null?void 0:t.category)==="-1"||!((c=n.query)!=null&&c.category))&&(g="");const C=await $fetch(`${y.public.apiBase}/${m}?take=200&${g}`);$.value=C.data,P.value=parseInt($.value.length/6)+1,x.value=[O,...r]}catch{}}async function T(s={_categoryId:-1,_page:1,mount:!1}){var a,r,g,C;const{_categoryId:t,_page:c,mount:l}=s;console.log(s);try{const B=t||((a=n.query)==null?void 0:a.category),A=c||((r=n.query)==null?void 0:r.page)||1,G=6;f.value=B||-1,R.value=A;let S=`categoryId=${B}`;(t==-1||!((g=n.query)!=null&&g.category)||l)&&(S=""),console.log((C=n.query)==null?void 0:C.category),console.log("b",t);const H=await $fetch(`${y.public.apiBase}/${m}?take=${G}&${S}&skip=${(A-1)*G}`),{data:L}=H;M.value=L,q.value=L;const J=await $fetch(`${y.public.apiBase}/${m}?take=200&${S}`);$.value=J.data,P.value=parseInt($.value.length/6)+1}catch{}}function z(s){const t=b.merch.find(l=>l.id===s.id);t?t.amount++:b.merch.push({...s,amount:1});const c=b.merch;b.updateMerch(c)}return(s,t)=>{var l;const c=X;return _(),u("div",ta,[o("div",ca,[o("div",na,[o("div",la,[o("div",ra,[o("div",da,[o("h4",ia,[o("a",{role:"button",href:"javascript:;",onClick:t[0]||(t[0]=a=>w.value=!e(w))}," \u7522\u54C1\u985E\u5225 ")])]),o("div",{id:"tab-collapse-area",class:V([{inactive:e(w)},"panel-collapse collapse in"]),role:"tabpanel","aria-labelledby":"headingOne"},[o("ul",null,[(_(!0),u(D,null,E(e(x),a=>{var r;return _(),u("li",{key:a.id,class:V({active:((r=e(n).query)==null?void 0:r.category)==a.id||e(f)===a.id})},[k(c,{to:`/shop?category=${a.id}`,onClick:g=>T({_categoryId:a.id,_page:1})},{default:I(()=>[p(d(a.name),1)]),_:2},1032,["to","onClick"])],2)}),128))])],2)])])]),o("div",ua,[o("ol",_a,[pa,ha,o("li",ga,d((l=e(x).find(a=>a.id===e(f)))==null?void 0:l.name),1)]),o("div",fa,[o("div",va,[(_(!0),u(D,null,E(e(q),a=>(_(),u("div",{key:a.id,class:"product_frame"},[N(o("div",ya,[o("span",null,d(a.brief),1)],512),[[F,a.brief]]),o("div",$a,[k(c,{to:`/product?id=${a.id}`},{default:I(()=>[o("img",{src:a==null?void 0:a.coverImg,alt:""},null,8,ba)]),_:2},1032,["to"])]),o("h3",null,[k(c,{to:`/product?id=${a.id}`},{default:I(()=>[p(d(a.name),1)]),_:2},1032,["to"])]),o("ul",null,[o("li",null,[p(" $"+d(a==null?void 0:a.price)+" ",1),Ca]),o("li",null,[p(" $"+d(a==null?void 0:a.memberPrice)+" ",1),ka]),o("li",null,[p(" $"+d(a==null?void 0:a.vipPrice)+" ",1),Ia]),o("li",null,[p(" $"+d(a==null?void 0:a.svipPrice)+" ",1),Pa]),o("li",null,[o("button",{onClick:r=>z(a)},qa,8,xa)])])]))),128))])]),N(o("span",Ta,"\u76EE\u524D\u6C92\u6709\u8A72\u985E\u5225\u7684\u7522\u54C1",512),[[F,!e(q).length]]),o("div",Ba,[o("ul",Sa,[(_(!0),u(D,null,E(e(P),a=>(_(),u("li",{key:a,class:V({active:e(R)==a})},[k(c,{to:`/shop?category=${e(f)}&page=${a}`,onClick:r=>T({_categoryId:e(f),_page:a})},{default:I(()=>[p(d(a),1)]),_:2},1032,["to","onClick"])],2))),128))])])])])])}}},Ea=Y(ma,[["__scopeId","data-v-66b46908"]]);export{Ea as default};

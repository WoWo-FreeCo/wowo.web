import{j as T,e as j,k as q}from"./entry.975454b2.js";import{b as D,w as E,c as N,o as R,a6 as f,a8 as t,a0 as h,$ as p,af as V,y as n,J as L,G,ad as l,F,V as M,C as u,a9 as U,f as z,Z as b}from"./swiper-vue.9b7a244a.js";import{u as H}from"./authStore.c5358098.js";import{u as J}from"./cartStore.6a3468e0.js";import{P as _}from"./common.45dab837.js";const O={class:"full_height mt-30 mt185ptb30"},Z={class:"cart_container mb-50"},K={class:"list-inline dashboard-menu text-center"},Q={class:"text-center",style:{margin:"72px 0"}},W=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),X=t("h2",{class:"text-center"}," \u8CFC\u7269\u8ECA\u6C92\u6709\u6771\u897F ",-1),Y={key:0,method:"post",action:"javascript:;"},S={class:"cart_list"},tt={class:"cart_img"},et={href:"/product",target:"new"},st=["src"],nt={class:"cart_tl"},at={href:"/product",target:"new"},ot=t("span",null,"\u6EFF\u984D\u514D\u904B",-1),ct={class:"cart_price text-right"},rt={class:"cart_price text-right"},lt=["onClick"],ut=t("i",{class:"fa-solid fa-trash-can"},null,-1),_t=[ut],dt={class:"cart_check"},it={class:"text-right mb-20 mt-20"},ht={class:"alert alert-warning alert-common",role:"alert"},Ct={__name:"cart",setup(pt){const g=T(),I=j(),o=H(),a=J(),d=D(_.General);E(g,e=>{C()});const i=N(()=>{switch(d.value){case _.ColdChain:return a==null?void 0:a.merch.filter(e=>e.attribute==="COLD_CHAIN");default:return a==null?void 0:a.merch.filter(e=>e.attribute==="GENERAL")}}),v=N({get:()=>i.value.reduce((e,c)=>e+m(c)*c.amount,0),set:e=>{v.value=e}});R(()=>{console.log(o.user),C()});const m=e=>{var c,r;return((c=o==null?void 0:o.user)==null?void 0:c.memberLevel)==="SVIP"?e==null?void 0:e.svipPrice:((r=o==null?void 0:o.user)==null?void 0:r.memberLevel)==="VIP"?e==null?void 0:e.vipPrice:o.status.loggedIn?e==null?void 0:e.memberPrice:e==null?void 0:e.price};function C(){switch(g.query.type){case"cold-chain":d.value=_.ColdChain;break;default:d.value=_.General;break}}function $(e){a.merch=a.merch.filter(c=>c.id!==e.id)}function A(){I.push({path:"/checkout",query:{...g.query}})}return(e,c)=>{var y,k;const r=q,B=z("n-input-number");return b(),f("div",O,[t("div",Z,[t("ul",K,[t("li",null,[h(r,{to:"/cart",class:V({active:n(d)===n(_).General})},{default:p(()=>[u(" \u4E00\u822C\u5546\u54C1 ")]),_:1},8,["class"])]),t("li",null,[h(r,{to:"/cart?type=cold-chain",class:V({active:n(d)===n(_).ColdChain})},{default:p(()=>[u(" \u51B7\u934A\u5546\u54C1 ")]),_:1},8,["class"])])]),L(t("div",Q,[W,X,h(r,{to:"/shop"},{default:p(()=>[u(" \u8D95\u7DCA\u53BB\u6DFB\u52A0 ")]),_:1})],512),[[G,!((y=n(a))!=null&&y.merch.length)]]),(k=n(a))!=null&&k.merch.length?(b(),f("form",Y,[t("div",null,"\u5171"+l(n(i).length)+"\u9805\u5546\u54C1",1),t("table",S,[t("tbody",null,[(b(!0),f(F,null,M(n(i),s=>{var x,w;return b(),f("tr",{key:s.id},[t("td",tt,[t("a",et,[t("img",{src:((x=s==null?void 0:s.thumbnail)==null?void 0:x.url)||"/products/p"+(s.id-10)+".jpg"},null,8,st)])]),t("td",nt,[t("a",at,[t("h5",null,l(s==null?void 0:s.name),1)]),h(B,{value:s.amount,"onUpdate:value":P=>s.amount=P,min:1,style:{width:"150px"}},{default:p(()=>[ot]),_:2},1032,["value","onUpdate:value"])]),t("td",ct,[t("span",null,"\u5E02\u50F9 $"+l((w=s==null?void 0:s.price)==null?void 0:w.market),1),u(" \u50F9\u9322 $"+l(m(s)),1)]),t("td",rt,[t("button",{type:"button",class:"del_btn",onClick:P=>$(s)},_t,8,lt)])])}),128))])]),t("ul",dt,[t("li",null,[u(" \u5546\u54C1\u91D1\u984D\u5C0F\u8A08 (\u5171"+l(n(i).length)+"\u9805\u5546\u54C1)\uFF1A",1),t("span",null,"$"+l(n(v)),1)])]),t("div",it,[h(r,{type:"button",class:"btn btn-main btn-bag",to:"/shop"},{default:p(()=>[u(" \u7E7C\u7E8C\u8CFC\u7269 ")]),_:1}),t("button",{type:"submit",class:"btn btn-main btn-check",onClick:A}," \u4E0B\u4E00\u6B65 ")])])):U("",!0),L(t("div",ht," \u8CBC\u5FC3\u63D0\u9192: \u4E00\u822C\u5E38\u6EAB\u5546\u54C1,\u7121\u6CD5\u8207\u51B7\u934A\u5546\u54C1\u540C\u6642\u51FA\u8CA8, \u656C\u8ACB\u5206\u958B\u7D50\u5E33,\u8B1D\u8B1D\u60A8 ",512),[[G,n(i).length]])])])}}};export{Ct as default};

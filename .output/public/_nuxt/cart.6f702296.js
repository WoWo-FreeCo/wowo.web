import{a as R,j,e as D,k as F}from"./entry.f1075444.js";import{b as U,w as z,c as v,o as E,_ as m,aa as t,$ as h,a0 as p,ad as M,y as s,J as b,G as f,ae as u,F as J,V as O,C as d,ab as Z,f as H,Z as y,a8 as K,a9 as Q}from"./swiper-vue.d582d122.js";import{u as W}from"./authStore.485cc762.js";import{u as X}from"./cartStore.ef01ecb8.js";import{P as c}from"./common.0260327a.js";const C=g=>(K("data-v-352c2ee8"),g=g(),Q(),g),Y={class:"full_height mt-30 mt185ptb30"},S={class:"cart_container mb-50"},tt={class:"list-inline dashboard-menu text-center"},et={class:"text-center",style:{margin:"72px 0"}},st=C(()=>t("i",{class:"fa-solid fa-cart-shopping"},null,-1)),at=C(()=>t("h2",{class:"text-center"}," \u8CFC\u7269\u8ECA\u6C92\u6709\u6771\u897F ",-1)),nt={key:0,method:"post",action:"javascript:;"},ot={class:"cart_list"},ct={class:"cart_img"},rt={href:"/product",target:"new"},lt=["src"],ut={class:"cart_tl"},_t={href:"/product",target:"new"},dt=C(()=>t("span",null,"\u6EFF\u984D\u514D\u904B",-1)),it={class:"cart_price text-right"},ht={class:"cart_price text-right"},pt=["onClick"],bt=C(()=>t("i",{class:"fa-solid fa-trash-can"},null,-1)),ft=[bt],gt={class:"cart_check"},vt={class:"text-right mb-20 mt-20"},mt=["disabled"],yt={class:"alert alert-warning alert-common",role:"alert"},Ct={__name:"cart",setup(g){const x=j(),B=D(),o=W(),n=X(),i=U(c.General);z(x,e=>{L()});const r=v(()=>{switch(i.value){case c.ColdChain:return n==null?void 0:n.merch.filter(e=>e.attribute===c.ColdChain);default:return n==null?void 0:n.merch.filter(e=>e.attribute===c.General)}}),k=v(()=>n==null?void 0:n.merch.filter(e=>e.attribute===c.ColdChain)),w=v(()=>n==null?void 0:n.merch.filter(e=>e.attribute===c.General)),P=v({get:()=>r.value.reduce((e,l)=>e+I(l)*l.amount,0),set:e=>{P.value=e}});E(()=>{console.log(o.user),L()});const I=e=>{var l,_;return((l=o==null?void 0:o.user)==null?void 0:l.memberLevel)==="SVIP"?e==null?void 0:e.svipPrice:((_=o==null?void 0:o.user)==null?void 0:_.memberLevel)==="VIP"?e==null?void 0:e.vipPrice:o.status.loggedIn?e==null?void 0:e.memberPrice:e==null?void 0:e.price};function L(){switch(x.query.type){case"cold-chain":i.value=c.ColdChain;break;default:i.value=c.General;break}}function T(e){n.merch=n.merch.filter(l=>l.id!==e.id)}function q(){B.push({path:"/checkout",query:{...x.query}})}return(e,l)=>{const _=F,A=H("n-input-number");return y(),m("div",Y,[t("div",S,[t("ul",tt,[t("li",null,[h(_,{to:"/cart",class:M(["type-name",{active:s(i)===s(c).General}])},{default:p(()=>[d(" \u4E00\u822C\u5546\u54C1 "),b(t("span",{class:"cart-amount"},u(s(w).length),513),[[f,s(w).length]])]),_:1},8,["class"])]),t("li",null,[h(_,{to:"/cart?type=cold-chain",class:M(["type-name",{active:s(i)===s(c).ColdChain}])},{default:p(()=>[d(" \u51B7\u934A\u5546\u54C1 "),b(t("span",{class:"cart-amount"},u(s(k).length),513),[[f,s(k).length]])]),_:1},8,["class"])])]),b(t("div",et,[st,at,h(_,{to:"/shop"},{default:p(()=>[d(" \u8D95\u7DCA\u53BB\u6DFB\u52A0 ")]),_:1})],512),[[f,!s(r).length]]),s(r).length?(y(),m("form",nt,[t("div",null,"\u5171"+u(s(r).length)+"\u9805\u5546\u54C1",1),t("table",ot,[t("tbody",null,[(y(!0),m(J,null,O(s(r),a=>{var V,G,N;return y(),m("tr",{key:a.id,class:"prod-tr"},[t("td",ct,[t("a",rt,[t("img",{src:((V=a==null?void 0:a.thumbnail)==null?void 0:V.url)||`https://picsum.photos/500/500?${a.id}`},null,8,lt)])]),t("td",ut,[t("a",_t,[t("h5",null,u(a==null?void 0:a.name),1)]),h(A,{value:a.amount,"onUpdate:value":$=>a.amount=$,min:1,style:{width:"150px"}},{default:p(()=>[dt]),_:2},1032,["value","onUpdate:value"])]),t("td",it,[b(t("span",null," \u5E02\u50F9 $"+u(a==null?void 0:a.price),513),[[f,((G=s(o).user)==null?void 0:G.memberLevel)&&((N=s(o).user)==null?void 0:N.memberLevel)!=="NORMAL"]]),d(" \u50F9\u9322 $"+u(I(a)),1)]),t("td",ht,[t("button",{type:"button",class:"del_btn",onClick:$=>T(a)},ft,8,pt)])])}),128))])]),t("ul",gt,[t("li",null,[d(" \u5546\u54C1\u91D1\u984D\u5C0F\u8A08 (\u5171"+u(s(r).length)+"\u9805\u5546\u54C1)\uFF1A",1),t("span",null,"$"+u(s(P)),1)])]),t("div",vt,[h(_,{type:"button",class:"btn btn-main btn-bag",to:"/shop"},{default:p(()=>[d(" \u7E7C\u7E8C\u8CFC\u7269 ")]),_:1}),t("button",{type:"submit",class:"btn btn-main btn-check",disabled:s(r).length<=0,onClick:q}," \u4E0B\u4E00\u6B65 ",8,mt)])])):Z("",!0),b(t("div",yt," \u8CBC\u5FC3\u63D0\u9192: \u4E00\u822C\u5E38\u6EAB\u5546\u54C1,\u7121\u6CD5\u8207\u51B7\u934A\u5546\u54C1\u540C\u6642\u51FA\u8CA8, \u656C\u8ACB\u5206\u958B\u7D50\u5E33,\u8B1D\u8B1D\u60A8 ",512),[[f,s(r).length]])])])}}},Lt=R(Ct,[["__scopeId","data-v-352c2ee8"]]);export{Lt as default};

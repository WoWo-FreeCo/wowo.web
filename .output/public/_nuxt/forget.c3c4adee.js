import{_ as b}from"./client-only.46688fa6.js";import{H as y,r as T,q as w,u as v,B as d,O as k}from"./entry.e0dd610b.js";import{b as B,o as $,a3 as S,a0 as x,Z as E,aa as o,J as p,af as m,y as i,C as f}from"./swiper-vue.6d0a2b42.js";const R={class:"full_height mt185ptb30"},C={class:"container"},U=o("h3",{class:"login_tl"},[f(" \u5FD8\u8A18\u5BC6\u78BC"),o("br"),f("Forget password ")],-1),q={class:"contact-form"},G={id:"",method:"post",action:"javascript:;"},I={class:"form-group"},L={class:"form-group"},F={__name:"forget",setup(O){const h=y(),l=T(),a=w(),c=v(),r=B({email:"",password:""});$(async()=>{const e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken");if(e){try{const s=await $fetch(`${c.public.apiBase}/${d}`,{method:"GET",headers:{Authorization:"Bearer "+e}});a.loginSuccess(e,t),a.updateUser(s.data)}catch{a.logout()}u()}});async function _(){try{const e=await $fetch(`${c.public.apiBase}/${k}`,{method:"POST",body:r.value});console.log(e),g(e.data)}catch(e){e.statusCode&&alert("\u8ACB\u8F38\u5165\u6B63\u78BA\u7684\u5E33\u865F\u53CA\u5BC6\u78BC")}}async function g(e){const{accessToken:t,refreshToken:s}=e;a.loginSuccess(t,s);const n=await $fetch(`${c.public.apiBase}/${d}`,{method:"GET",headers:{Authorization:"Bearer "+t}});a.updateUser(n.data),u()}function u(){var t;const e=(t=h.query)==null?void 0:t.redirect;e?l.push({path:e}):l.push({path:"/profile"})}return(e,t)=>{const s=b;return E(),S(s,null,{default:x(()=>[o("section",R,[o("div",C,[U,o("div",q,[o("form",G,[o("div",I,[p(o("input",{id:"input-field-email","onUpdate:modelValue":t[0]||(t[0]=n=>i(r).email=n),type:"email",placeholder:"Email*",class:"form-control",name:"",required:""},null,512),[[m,i(r).email]])]),o("div",L,[p(o("input",{id:"input-field-password","onUpdate:modelValue":t[1]||(t[1]=n=>i(r).password=n),autocomplete:"",type:"password",placeholder:"\u5BC6\u78BC*",class:"form-control",name:"",required:""},null,512),[[m,i(r).password]])]),o("div",{class:"text-center"},[o("input",{id:"input-field-submit",type:"submit",class:"btn btn-main btn-bag",value:"\u9001\u51FA",onClick:_})])])])])])]),_:1})}}};export{F as default};

import{a as X,u as m,H as aa,q as sa,J as ea,c as oa,f as O,C as ta}from"./entry.bfd5dcdb.js";import{b as _,o as ca,q as na,_ as v,aa as s,y as o,ad as p,F as R,V as D,ae as u,J as F,G as N,Z as g,$ as w,a0 as S,C as y,a8 as la,a9 as ra}from"./swiper-vue.6d0a2b42.js";const h=C=>(la("data-v-a1634a37"),C=C(),ra(),C),da={class:"full_height mt-120"},ia={class:"row"},ua={class:"col-sm-3 p-0 bg_left2"},_a={id:"accordion",class:"panel-group commonAccordion",role:"tablist","aria-multiselectable":"true"},pa={class:"panel panel-default"},ha={id:"headingOne",class:"panel-heading",role:"tab"},fa={class:"panel-title"},va={class:"col-sm-9 pl20pr30"},ga={class:"breadcrumb"},ya=h(()=>s("li",null,[s("a",{href:"/"},"Home")],-1)),$a=h(()=>s("li",null,"\u7522\u54C1\u4ECB\u7D39",-1)),ba={class:"active"},ka={class:"row"},Ca={class:"flex-row col-lg-4 col-md-6 col-sm-12"},Pa=["onClick"],Ia={class:"hot_sale2"},xa={class:"product_img"},qa=h(()=>s("div",{class:"skeleton"},null,-1)),wa=["src"],Sa=h(()=>s("span",null,"\u5E02\u50F9",-1)),Ma=h(()=>s("span",null,"\u6703\u54E1",-1)),Ta=h(()=>s("span",null,"VIP",-1)),La=h(()=>s("span",null,"SVIP",-1)),Va=["onClick"],Aa=h(()=>s("i",{class:"fa-solid fa-cart-shopping"},null,-1)),Ba=[Aa],Oa={class:"not-found"},Ra={class:"text-center"},Da={class:"pagination post-pagination"},Fa={__name:"shop",setup(C){const P=m(),d=aa(),E={id:-1,name:"\u6240\u6709\u7522\u54C1"},b=_(E.id),G=_(1),I=_([]),M=_(1),T=_([]),U=_([]),x=sa(),l=ea(),L=_(!1),j=Array.from({length:6},()=>({type:"fake"})),V=_(j);ca(async()=>{await na(),z()});function z(){var e;Y(),A({_categoryId:((e=d.query)==null?void 0:e.category)||-1})}async function Y(){var e,t,c;try{const n=(e=d.query)==null?void 0:e.category,a=await $fetch(`${P.public.apiBase}/${oa}`),{data:r}=a;let i=`categoryId=${n}`;(((t=d.query)==null?void 0:t.category)==="-1"||!((c=d.query)!=null&&c.category))&&(i="");const f=await $fetch(`${P.public.apiBase}/${O}?take=200&${i}`);I.value=f.data,M.value=parseInt(I.value.length/6)+1,T.value=[E,...r]}catch{}}async function A(e={_categoryId:-1,_page:1,mount:!1}){var a,r,i,f;const{_categoryId:t,_page:c,mount:n}=e;console.log(e);try{const $=t||((a=d.query)==null?void 0:a.category),k=c||((r=d.query)==null?void 0:r.page)||1,q=6;b.value=$||-1,G.value=k;let B=`categoryId=${$}`;(t==-1||!((i=d.query)!=null&&i.category)||n)&&(B=""),console.log((f=d.query)==null?void 0:f.category),console.log("b",t);const Q=await $fetch(`${P.public.apiBase}/${O}?take=${q}&${B}&skip=${(k-1)*q}`),{data:J}=Q;U.value=J,V.value=J;const W=await $fetch(`${P.public.apiBase}/${O}?take=200&${B}`);I.value=W.data,M.value=parseInt(I.value.length/6)+1}catch{}}function H(e){var t;return(t=l.favMerch)==null?void 0:t.find(c=>c.id===(e==null?void 0:e.id))}function Z(e){l.favMerch.find(n=>n.id===(e==null?void 0:e.id))?l.favMerch=l.favMerch.filter(n=>n.id!==(e==null?void 0:e.id)):l.favMerch.push(e);const c=l.favMerch;l.updateFavMerch(c)}function K(e){const t=l.merch.find(n=>n.id===e.id);t?t.amount++:l.merch.push({...e,amount:1});const c=l.merch;l.updateMerch(c)}return(e,t)=>{var n;const c=ta;return g(),v("div",da,[s("div",ia,[s("div",ua,[s("div",_a,[s("div",pa,[s("div",ha,[s("h4",fa,[s("a",{role:"button",href:"javascript:;",onClick:t[0]||(t[0]=a=>L.value=!o(L))}," \u7522\u54C1\u985E\u5225 ")])]),s("div",{id:"tab-collapse-area",class:p([{inactive:o(L)},"panel-collapse collapse in"]),role:"tabpanel","aria-labelledby":"headingOne"},[s("ul",null,[(g(!0),v(R,null,D(o(T),a=>{var r;return g(),v("li",{key:a.id,class:p({active:((r=o(d).query)==null?void 0:r.category)==a.id||o(b)===a.id})},[w(c,{to:`/shop?category=${a.id}`,onClick:i=>A({_categoryId:a.id,_page:1})},{default:S(()=>[y(u(a.name),1)]),_:2},1032,["to","onClick"])],2)}),128))])],2)])])]),s("div",va,[s("ol",ga,[ya,$a,s("li",ba,u((n=o(T).find(a=>a.id===o(b)))==null?void 0:n.name),1)]),s("div",ka,[s("div",Ca,[(g(!0),v(R,null,D(o(V),a=>{var r,i,f,$,k;return F((g(),v("div",{key:a.id,class:"product_frame"},[s("button",{class:"add_like",onClick:q=>Z(a)},[s("i",{class:p(["far fa-heart",{"fa-solid":H(a),"fa-heart":H(a)}])},null,2)],8,Pa),F(s("div",Ia,[s("span",null,u(a.brief),1)],512),[[N,a.brief]]),s("div",xa,[qa,w(c,{to:`/product?id=${a.id}`},{default:S(()=>[s("img",{src:a==null?void 0:a.coverImg,alt:""},null,8,wa)]),_:2},1032,["to"])]),s("h3",null,[w(c,{to:`/product?id=${a.id}`},{default:S(()=>[y(u(a.name),1)]),_:2},1032,["to"])]),s("ul",null,[s("li",{class:p({vip_price:!((r=o(x).user)!=null&&r.memberLevel)})},[y(" $"+u(a==null?void 0:a.price)+" ",1),Sa],2),s("li",{class:p({vip_price:((i=o(x).user)==null?void 0:i.memberLevel)==="NORMAL"})},[y(" $"+u(a==null?void 0:a.memberPrice)+" ",1),Ma],2),s("li",{class:p({vip_price:((f=o(x).user)==null?void 0:f.memberLevel)==="VIP"})},[y(" $"+u(a==null?void 0:a.vipPrice)+" ",1),Ta],2),s("li",{class:p({vip_price:(($=o(x).user)==null?void 0:$.memberLevel)==="SVIP"})},[y(" $"+u(a==null?void 0:a.svipPrice)+" ",1),La],2),s("li",null,[s("button",{onClick:q=>K(a)},Ba,8,Va)])])])),[[N,((k=a==null?void 0:a.inventory)==null?void 0:k.quantity)>=1||(a==null?void 0:a.type)==="fake"]])}),128))])]),F(s("span",Oa,"\u76EE\u524D\u6C92\u6709\u8A72\u985E\u5225\u7684\u7522\u54C1",512),[[N,!o(V).length]]),s("div",Ra,[s("ul",Da,[(g(!0),v(R,null,D(o(M),a=>(g(),v("li",{key:a,class:p({active:o(G)==a})},[w(c,{to:`/shop?category=${o(b)}&page=${a}`,onClick:r=>A({_categoryId:o(b),_page:a})},{default:S(()=>[y(u(a),1)]),_:2},1032,["to","onClick"])],2))),128))])])])])])}}},Ga=X(Fa,[["__scopeId","data-v-a1634a37"]]);export{Ga as default};

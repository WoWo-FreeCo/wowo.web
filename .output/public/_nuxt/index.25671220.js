import{_ as A,a as O}from"./ProfileSidebar.ac088ac1.js";import{a as I,q as B,b as G,r as L,H as V,u as M,T as q,S as Y,C as z}from"./entry.e0dd610b.js";import{b as m,c as F,o as U,_ as u,aa as e,$ as C,ad as k,y as l,J as R,ao as j,i as H,F as J,V as Z,G as K,Z as d,ae as r,a0 as Q,C as X,ab as D,a8 as tt,a9 as et,a7 as at}from"./swiper-vue.6d0a2b42.js";import{d as st}from"./dayjs.min.fdce97be.js";import{P as c,O as a}from"./common.2876555a.js";import"./pageStatusStore.109f1dfe.js";const W=_=>(tt("data-v-1d6700c7"),_=_(),et(),_),nt={class:"full_height mt185ptb30 pt0"},ot={class:"row"},lt={class:"col-sm-9 pl20pr30"},ct={class:"list-inline dashboard-menu"},it={class:"select r0t0"},ut=W(()=>e("option",{value:"-1"}," \u8A02\u55AE\u72C0\u614B ",-1)),dt=["value"],rt=["value"],_t=["value"],ht=["value"],vt=["value"],pt=["value"],ft={class:"member_table order_table"},mt=W(()=>e("thead",null,[e("tr",null,[e("th",null," \u8A02\u55AE\u7DE8\u865F "),e("th",null," \u8A02\u55AE\u65E5\u671F "),e("th",null," \u4ED8\u6B3E\u65B9\u5F0F "),e("th",null," \u8A02\u55AE\u91D1\u984D "),e("th",null," \u8A02\u55AE\u72C0\u614B "),e("th")])],-1)),Ct={"data-th":"\u8A02\u55AE\u7DE8\u865F"},bt={"data-th":"\u8A02\u55AE\u65E5\u671F"},St={"data-th":"\u8A02\u55AE\u985E\u578B"},yt={"data-th":"\u8A02\u55AE\u91D1\u984D"},gt={"data-th":"\u8A02\u55AE\u72C0\u614B"},kt={class:"action-btns"},Rt=["onClick"],Dt={class:"text-center"},Wt=at('<ul class="pagination post-pagination" data-v-1d6700c7><li data-v-1d6700c7><a href="#!" data-v-1d6700c7>\u4E0A\u4E00\u9801</a></li><li class="active" data-v-1d6700c7><a href="#!" data-v-1d6700c7>1</a></li><li data-v-1d6700c7><a href="#!" data-v-1d6700c7>2</a></li><li data-v-1d6700c7><a href="#!" data-v-1d6700c7>3</a></li><li data-v-1d6700c7><a href="#!" data-v-1d6700c7>4</a></li><li data-v-1d6700c7><a href="#!" data-v-1d6700c7>5</a></li><li data-v-1d6700c7><a href="#!" data-v-1d6700c7>\u4E0B\u4E00\u9801</a></li></ul>',1),$t=[Wt],xt={__name:"index",setup(_){const $=B(),p=G(),b=L(),S=V(),y=M(),f=m([]),h=m(-1),i=m(c.General),x=F(()=>{var o,v;let t=[];switch(i.value){case c.ColdChain:t=[...(o=f.value)==null?void 0:o.filter(n=>n.attribute===c.ColdChain)];break;default:t=[...(v=f.value)==null?void 0:v.filter(n=>n.attribute===c.General)];break}switch(h.value){case a.WaitPayment:return t==null?void 0:t.filter(n=>n.orderStatus===a.WaitPayment);case a.WaitDeliver:return t==null?void 0:t.filter(n=>n.orderStatus===a.WaitDeliver);case a.WaitReceive:return t==null?void 0:t.filter(n=>n.orderStatus===a.WaitReceive);case a.Completed:return t==null?void 0:t.filter(n=>n.orderStatus===a.Completed);case a.Cancelled:return t==null?void 0:t.filter(n=>n.orderStatus===a.Cancelled);case a.Revoked:return t==null?void 0:t.filter(n=>n.orderStatus===a.Revoked);default:return t}}),P=t=>{switch(t==null?void 0:t.orderStatus){case a.WaitPayment:return"\u5F85\u4ED8\u6B3E";case a.WaitDeliver:return"\u5F85\u51FA\u8CA8";case a.WaitReceive:return"\u5DF2\u51FA\u8CA8";case a.Completed:return"\u5DF2\u5B8C\u6210";case a.Cancelled:return"\u5DF2\u53D6\u6D88";case a.Revoked:return"\u5DF2\u9000\u8CA8";default:return curOrder.value.orderStatus}};function w(t){return st(t).format("YYYY/MM/DD A hh:mm")}const E=t=>(t==null?void 0:t.attribute)===c.General?"\u4E00\u822C\u7269\u6D41\u5546\u54C1":(t==null?void 0:t.attribute)===c.ColdChain?"\u7279\u6B8A\u7269\u6D41\u5546\u54C1":t.attribute;U(async()=>{var t;if(!$.status.loggedIn)return b.push({path:"/login",query:{...S.query,redirect:"/order"}});((t=S.query)==null?void 0:t.payment)==="successful"&&(p.success("\u5DF2\u6210\u529F\u4ED8\u6B3E\uFF01"),b.replace({query:null})),await g()});async function g(){try{const t=await $fetch(`${y.public.apiBase}/${q}?take=200`,{headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}});console.log(t),f.value=t.data}catch(t){console.log(t)}}async function T(t){try{const o=t==null?void 0:t.id;await $fetch(`${y.public.apiBase}/${Y(o)}`,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("accessToken")}}),p.success("\u5DF2\u53D6\u6D88\u8A02\u55AE")}catch(o){p.error(o.data)}g()}return(t,o)=>{const v=A,n=O,N=z;return d(),u("div",null,[e("section",nt,[C(v),e("div",ot,[C(n),e("div",lt,[e("ul",ct,[e("li",null,[e("a",{class:k(["pointer",{active:l(i)===l(c).General}]),onClick:o[0]||(o[0]=s=>i.value=l(c).General)}," \u4E00\u822C\u7269\u6D41\u5546\u54C1 ",2)]),e("li",null,[e("a",{class:k(["pointer",{active:l(i)===l(c).ColdChain}]),onClick:o[1]||(o[1]=s=>i.value=l(c).ColdChain)}," \u7279\u6B8A\u7269\u6D41\u5546\u54C1 ",2)])]),e("div",it,[R(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>H(h)?h.value=s:null)},[ut,e("option",{value:l(a).WaitPayment}," \u5F85\u4ED8\u6B3E ",8,dt),e("option",{value:l(a).WaitDeliver}," \u904B\u9001\u4E2D ",8,rt),e("option",{value:l(a).WaitReceive}," \u5F85\u53D6\u8CA8 ",8,_t),e("option",{value:l(a).Completed}," \u5DF2\u5B8C\u6210 ",8,ht),e("option",{value:l(a).Cancelled}," \u5DF2\u53D6\u6D88 ",8,vt),e("option",{value:l(a).Revoked}," \u9000\u8CA8 ",8,pt)],512),[[j,l(h)]])]),e("table",ft,[mt,e("tbody",null,[(d(!0),u(J,null,Z(l(x),s=>(d(),u("tr",{key:s.id},[e("td",Ct,r(s==null?void 0:s.id),1),e("td",bt,r(w(s==null?void 0:s.createdAt)),1),e("td",St,r(E(s)),1),e("td",yt,r(s==null?void 0:s.price),1),e("td",gt,r(P(s)),1),e("td",kt,[C(N,{to:`/order/detail?id=${s.id}`,class:"btn btn-orderdetial"},{default:Q(()=>[X(" \u67E5\u770B\u660E\u7D30 ")]),_:2},1032,["to"]),s.orderStatus!=="CANCELLED"?(d(),u("button",{key:0,type:"button",class:"btn btn-orderdetial cancel-btn",onClick:Pt=>T(s)}," \u53D6\u6D88\u8A02\u55AE ",8,Rt)):D("",!0),s.orderStatus!=="WAIT_PAYMENT"&&s.orderStatus!=="CANCELLED"?(d(),u("button",{key:1,type:"button",class:"btn btn-orderdetial cancel-btn",onClick:o[3]||(o[3]=()=>{})}," \u7533\u8ACB\u9000\u8CA8 ")):D("",!0)])]))),128))])]),R(e("div",Dt,$t,512),[[K,!1]])])])])])}}},It=I(xt,[["__scopeId","data-v-1d6700c7"]]);export{It as default};

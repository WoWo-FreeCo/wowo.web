import{g as B,b as q,h as E}from"./entry.190e60b0.js";import{b as H,w as R,c as P,o as T,a6 as p,a8 as t,a0 as d,$ as h,af as V,v as o,H as g,D as v,ae as u,F as j,V as F,A as _,a9 as M,f as O,Z as f}from"./swiper-vue.08c57f7b.js";import{u as U}from"./authStore.3aea4787.js";import{u as z}from"./cartStore.1835ddc7.js";const G={class:"full_height mt-30 mt185ptb30"},Z={class:"cart_container mb-50"},J={class:"list-inline dashboard-menu text-center"},K={class:"text-center",style:{margin:"72px 0"}},Q=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),W=t("h2",{class:"text-center"}," \u8CFC\u7269\u8ECA\u6C92\u6709\u6771\u897F ",-1),X={key:0,method:"post",action:"javascript:;"},Y={class:"cart_list"},S={class:"cart_img"},tt={href:"/product",target:"new"},et=["src"],st={class:"cart_tl"},nt={href:"/product",target:"new"},at=t("span",null,"\u6EFF\u984D\u514D\u904B",-1),ot={class:"cart_price text-right"},ct={class:"cart_price text-right"},rt=["onClick"],lt=t("i",{class:"fa-solid fa-trash-can"},null,-1),ut=[lt],_t={class:"cart_check"},it={class:"text-right mb-20 mt-20"},dt={class:"alert alert-warning alert-common",role:"alert"},ht={class:"alert alert-warning alert-common",role:"alert"},mt={__name:"cart",setup(pt){const b=B(),A=q(),c=U(),n=z(),i=H("normal");R(b,e=>{k(),console.log(n==null?void 0:n.merch.filter(a=>a.attribute==="COLD_CHAIN"))});const l=P(()=>i.value==="cold-chain"?n==null?void 0:n.merch.filter(e=>e.attribute==="COLD_CHAIN"):n==null?void 0:n.merch.filter(e=>e.attribute==="GENERAL")),m=P({get:()=>l.value.reduce((e,a)=>e+y(a)*a.amount,0),set:e=>{m.value=e}});T(()=>{console.log(c.user),k()});const y=e=>{var a,r;return((a=c==null?void 0:c.user)==null?void 0:a.memberLevel)==="SVIP"?e==null?void 0:e.svipPrice:((r=c==null?void 0:c.user)==null?void 0:r.memberLevel)==="VIP"?e==null?void 0:e.vipPrice:c.status.loggedIn?e==null?void 0:e.memberPrice:e==null?void 0:e.price};function k(){switch(b.query.type){case"cold-chain":i.value="cold-chain";break;default:i.value="normal";break}}function I(e){n.merch=n.merch.filter(a=>a.id!==e.id)}function D(){A.push({path:"/checkout",query:{...b.query}})}return(e,a)=>{var x,C;const r=E,$=O("n-input-number");return f(),p("div",G,[t("div",Z,[t("ul",J,[t("li",null,[d(r,{to:"/cart",class:V({active:o(i)==="normal"})},{default:h(()=>[_(" \u4E00\u822C\u5546\u54C1 ")]),_:1},8,["class"])]),t("li",null,[d(r,{to:"/cart?type=cold-chain",class:V({active:o(i)==="cold-chain"})},{default:h(()=>[_(" \u51B7\u934A\u5546\u54C1 ")]),_:1},8,["class"])])]),g(t("div",K,[Q,W,d(r,{to:"/shop"},{default:h(()=>[_(" \u8D95\u7DCA\u53BB\u6DFB\u52A0 ")]),_:1})],512),[[v,!((x=o(n))!=null&&x.merch.length)]]),(C=o(n))!=null&&C.merch.length?(f(),p("form",X,[t("div",null,"\u5171"+u(o(l).length)+"\u9805\u5546\u54C1",1),t("table",Y,[t("tbody",null,[(f(!0),p(j,null,F(o(l),s=>{var w,N;return f(),p("tr",{key:s.id},[t("td",S,[t("a",tt,[t("img",{src:((w=s==null?void 0:s.thumbnail)==null?void 0:w.url)||"/products/p"+(s.id-10)+".jpg"},null,8,et)])]),t("td",st,[t("a",nt,[t("h5",null,u(s==null?void 0:s.name),1)]),d($,{value:s.amount,"onUpdate:value":L=>s.amount=L,min:1,style:{width:"150px"}},{default:h(()=>[at]),_:2},1032,["value","onUpdate:value"])]),t("td",ot,[t("span",null,"\u5E02\u50F9 $"+u((N=s==null?void 0:s.price)==null?void 0:N.market),1),_(" \u50F9\u9322 $"+u(y(s)),1)]),t("td",ct,[t("button",{type:"button",class:"del_btn",onClick:L=>I(s)},ut,8,rt)])])}),128))])]),t("ul",_t,[t("li",null,[_(" \u5546\u54C1\u91D1\u984D\u5C0F\u8A08 (\u5171"+u(o(l).length)+"\u9805\u5546\u54C1)\uFF1A",1),t("span",null,"$"+u(o(m)),1)])]),t("div",it,[d(r,{type:"button",class:"btn btn-main btn-bag",to:"/shop"},{default:h(()=>[_(" \u7E7C\u7E8C\u8CFC\u7269 ")]),_:1}),t("button",{type:"submit",class:"btn btn-main btn-check",onClick:D}," \u4E0B\u4E00\u6B65 ")])])):M("",!0),g(t("div",dt," \u904B\u9001\u63D0\u9192\uFF0Cex\uFF1A\u5B85\u914D\u586B\u5BEB\u5230\u8CA8\u6642\u9593 ",512),[[v,o(l).length]]),g(t("div",ht," \u8CBC\u5FC3\u63D0\u9192: \u4E00\u822C\u5E38\u6EAB\u5546\u54C1,\u7121\u6CD5\u8207\u51B7\u934A\u5546\u54C1\u540C\u6642\u51FA\u8CA8, \u656C\u8ACB\u5206\u958B\u7D50\u5E33,\u8B1D\u8B1D\u60A8 ",512),[[v,o(l).length]])])])}}};export{mt as default};
